abbrev=""
campaign=""
campaign_define=""
campaign_extra_defines=""
campaign_name=""
campaign_type="multiplayer"
difficulty="NORMAL"
end_credits="yes"
end_text=""
end_text_duration="0"
era_define=""
label="4p ‚Äî Isar‚Äôs Cross"
mod_defines=","
mp_game_title="FLORIS‚Äôs game"
oos_debug="no"
random_mode=""
scenario_define=""
version="1.14.4"
[replay]

	[upload_log]
	[/upload_log]
[/replay]
[scenario]
description="A very small 2 vs. 2 map. Close quarters fighting means the successful rotation of units and planning of moves is important. Teams set for players 1+4 vs. 2+3 (northeast vs. southwest). Designed for 75 starting gold, 20 villages."
experience_modifier="70"
has_mod_events="yes"
id="multiplayer_Isars_Cross"
map_data="_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, _off^_usr, Dd, _off^_usr, Md, _off^_usr, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Hd, Wwf, Wwf, Dd, Gll^Uf, Dd^Ftd, Gd^Fp, Hd, Mm, Dd, Hd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, Gd^Fp, Ss, Hh^Vc, Wwf, Gs, Gd, Gd, Hhd, Hhd, Gll^Uf, Gs^Fp, Dd^Fp, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Hd, Md, Hhd, Gs, Wwf, Ch, 2 Kh, Ch, Gd, Gs^Fp, Ss^Vhs, Rd, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, Ds^Ftd, Gll^Fp, Hhd, Ww, Ww, Ch, Gs, Gs, Gd, Ss, Hd, Dd^Ftd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Hd, Gd, Gs, Ww^Bw/, Ch, Gg, Gd, Rd, Md, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd^Ftd, Gd, Gs, Ww, Ww, Ww, Gs, Ss, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd, Md, Hd, _off^_usr, _off^_usr, _off^_usr, Dd^Uf, Dd, Gs^Vc, Wwf, Hh, Gg, Gg, Ww, Ss^Vhs, Dd^Ftd, Dd, _off^_usr, _off^_usr, _off^_usr, Dd, Dd, Hd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Ss, Gs^Fms, Ss^Vhs, Dd, Dd, Dd^Ftd, Gs, Dd, Wwf, Wwf, Gg, Gg, Hh, Gll^Uf, Hh^Fms, Ss, Ww, Gs, Gs^Ft, Hd, Gd^Fms, Hhd^Vc, Dd^Ftd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd, Gll^Uf, Rd, Ss, Ss, Ww, Ww^Vm, Ww, Wwf, Ds, Gg, Gg, Gs^Fp, Gs^Fms, Gg, Gg^Efm, Wwf, Dd, Gs, Gd, Rd, Hhd, Dd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd^Fp, Mm, Ch, Rd, Gs^Fp, Ss, Gg, Ds, Wwf, Gg, Hh, Gg, Gg^Vc, Gg^Efm, Gg, Ds, Wwf, Gg^Vc, Gg, Gll^Uf, Rd, Mm, Dd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Hd, Hhd, 4 Kh, Ch, Hh, Ss^Vhs, Gg, Gg, Hh, Chs, Gll^Uf, Hh, Gs^Fds, Gg, Gg, Hh, Gg, Ww, Gg, Gd, Ch, Gd^Fms, Dd^Fp, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd^Fp, Gd^Fp, Ch, Ch, Gs, Ww, Gg, Gg, Gg, Gll^Fp, Gs^Fds, Ss, Gll^Uf, Gll^Fp, Hh, Gg, Gg, Ww, Hh, Ch, 3 Kh, Gd^Fp, Hd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd, Gd^Fms, Rd, Gs, Gs, Ww, Wwf, Hh, Gg, Gg, Gg^Vc, Hh, Hh, Chs, Wwf, Gg, Gg, Ss^Vhs, Gs^Fp, Ch, Ch, Hhd, Dd^Fp, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd, Mm, Rd, Gll^Uf, Gg, Gg^Vc, Wwf, Ds, Gg, Gg^Efm, Gs^Fp, Gg, Gg, Gg, Wwf, Ds, Ww^Vm, Ss, Ss, Rd, Rd, Mm, Dd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Dd^Ftd, Hhd, Gd^Fms, Gd, Gd^Ftd, Dd, Ww, Gg^Efm, Hh^Fms, Gs^Fms, Hh, Gg, Gg, Ds, Wwf, Ww, Gs, Ww, Dd, Ss, Ss^Vhs, Gll^Uf, Ss, _off^_usr, _off^_usr
_off^_usr, _off^_usr, Hd, Hhd^Vc, Dd, Hd, _off^_usr, Gd, Dd, Ss, Ss^Vhs, Gll^Uf, Gg, Gg, Hh, Wwf, Gs^Vc, Dd, Dd^Uf, Dd^Ftd, _off^_usr, Dd, Hd, Gs^Fms, Dd, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd^Ftd, Ss, Ww, Ww, Gg, Ww, Wwf, Gs, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Md, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, Rd, Gg, Gg, Ww, Ww^Bw/, Gg, Gd, Dd^Ftd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Hd, Md, Gd, Gd, Gs, Ch, Ww, Gg, Hh, Hd, Dd^Ftd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd^Ftd, Rd, Ss, Gs^Fp, Gs, Ch, Ch, Ch, Ww, Gs, Gs^Fp, Md, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, Gs^Fp, Ss^Vhs, Hhd, Gd, Gd, 1 Kh, Gs, Wwf, Hh^Vc, Hhd, Gd^Fp, Hd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd^Fp, Hd, Gll^Uf, Mm, Hhd, Gd^Fp, Gd, Gll^Uf, Wwf, Wwf, Ss, Hd, Dd, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, Dd, Dd, Hd, Md, Dd^Ftd, Dd, Dd, Dd, Wwf, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
_off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr, _off^_usr
"
name="4p ‚Äî Isar‚Äôs Cross"
objectives="<big>Victory:</big>
<span color='#00ff00'>‚Ä¢ Defeat enemy leader(s)</span>"
random_start_time="no"
turns="-1"
[time]

		blue=0
		green=-15
		id="dawn"
		image="misc/time-schedules/default/schedule-dawn.png"
#textdomain wesnoth-help
		name=_"Dawn"
		red=-25
		sound="ambient/morning.ogg"
	[/time]
[time]

		id="morning"
		image="misc/time-schedules/default/schedule-morning.png"
		lawful_bonus=25
		name=_"Morning"
	[/time]
[time]

		id="afternoon"
		image="misc/time-schedules/default/schedule-afternoon.png"
		lawful_bonus=25
		name=_"Afternoon"
	[/time]
[time]

		blue=-35
		green=-20
		id="dusk"
		image="misc/time-schedules/default/schedule-dusk.png"
		name=_"Dusk"
		red=10
		sound="ambient/night.ogg"
	[/time]
[time]

		blue=-13
		green=-45
		id="first_watch"
		image="misc/time-schedules/default/schedule-firstwatch.png"
		lawful_bonus=-25
		name=_"First Watch"
		red=-75
	[/time]
[time]

		blue=-13
		green=-45
		id="second_watch"
		image="misc/time-schedules/default/schedule-secondwatch.png"
		lawful_bonus=-25
		name=_"Second Watch"
		red=-75
	[/time]
[music]

		ms_before=12000
		name="knolls.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="wanderer.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="battle.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="transience.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="the_king_is_dead.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="knalgan_theme.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="the_city_falls.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="nunc_dimittis.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="revelation.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="loyalists.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="breaking_the_chains.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="elvish-theme.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="legends_of_the_north.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="traveling_minstrels.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="underground.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="vengeful.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="frantic.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="the_dangerous_symphony.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="heroes_rite.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="suspense.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="the_deep_path.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="siege_of_laurelmor.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="casualties_of_war.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="silvan_sanctuary.ogg"
	[/music]
[music]

		append=yes
		ms_before=12000
		name="battle-epic.ogg"
	[/music]
[event]

		name="prestart"
		[music]
			ms_before=12000
			name="knolls.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="wanderer.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="battle.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="transience.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="the_king_is_dead.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="knalgan_theme.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="the_city_falls.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="nunc_dimittis.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="revelation.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="loyalists.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="breaking_the_chains.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="elvish-theme.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="legends_of_the_north.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="traveling_minstrels.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="underground.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="vengeful.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="frantic.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="the_dangerous_symphony.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="heroes_rite.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="suspense.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="the_deep_path.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="siege_of_laurelmor.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="casualties_of_war.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="silvan_sanctuary.ogg"
		[/music]
		[music]
			append=yes
			ms_before=12000
			name="battle-epic.ogg"
		[/music]
	[/event]
[event]

		first_time_only=no
		name="preload"
		[set_variable]
			name="pickadvance_contacts"
			value="Contacts:
* Source code, issue tracker: https://github.com/vgaming/pick_advance
* BTC: 148AvMtozrKs3MzXCNMGNUTHLoqahw3fCo
* vasya: my name on wesnoth :)
* vn971 on IRC.freenode.net (I often visit #wesnoth-umc-dev)
"
		[/set_variable]
		[lua]
			code="-- json_format

-- wesnoth.dofile(""~add-ons/pick_advance/lua/json_format.lua"")

local next = next
local print = print
local tostring = tostring
local type = type
local gsub = string.gsub
local table = table

local delete_chars = string.char(00, 01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12, 13, 14, 15,
	16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31) -- https://www.ietf.org/rfc/rfc4627.txt
local delete_regexp = ""["" .. delete_chars .. ""]""

-- escaping takes 3/4 of the time, but we can't avoid it...
local function escape(str)
	str = gsub(str, delete_regexp, """")
	str = gsub(str, '\\', '\\\\')
	return gsub(str, '""', '\\""')
end

local function print_table_key(obj, buffer)
	local _type = type(obj)
	if _type == ""string"" then
		buffer[#buffer + 1] = escape(obj)
	elseif _type == ""number"" then
		buffer[#buffer + 1] = obj
	elseif _type == ""boolean"" then
		buffer[#buffer + 1] = tostring(obj)
	else
		buffer[#buffer + 1] = '???' .. _type .. '???'
	end
end

local function format_any_value(obj, buffer)
	local _type = type(obj)
	if _type == ""table"" then
		buffer[#buffer + 1] = '{'
		buffer[#buffer + 1] = '""' -- needs to be separate for empty tables {}
		for key, value in next, obj, nil do
			print_table_key(key, buffer)
			buffer[#buffer + 1] = '"":'
			format_any_value(value, buffer)
			buffer[#buffer + 1] = ',""'
		end
		buffer[#buffer] = '}' -- note the overwrite
	elseif _type == ""string"" then
		buffer[#buffer + 1] = '""' .. escape(obj) .. '""'
	elseif _type == ""boolean"" or _type == ""number"" then
		buffer[#buffer + 1] = tostring(obj)
	elseif _type == ""userdata"" then
		buffer[#buffer + 1] = '""' .. escape(tostring(obj)) .. '""'
	else
		buffer[#buffer + 1] = '""???' .. _type .. '???""'
	end
end

local function _format_as_json(obj)
	if obj == nil then return ""null"" else
		local buffer = {}
		format_any_value(obj, buffer)
		return table.concat(buffer)
	end
end

local function _print_as_json(...)
	local result = {}
	local n = 1
	for _, v in ipairs({ ... }) do
		result[n] = _format_as_json(v)
		n = n + 1
	end
	print(table.concat(result, ""\t""))
end


format_as_json = _format_as_json
print_as_json = _print_as_json

-- "
		[/lua]
		[lua]
			code="-- pickadvance_dialog

pickadvance = {}
local pickadvance = pickadvance
local wesnoth = wesnoth
local ipairs = ipairs
local table = table
local T = wesnoth.require(""lua/helper.lua"").set_wml_tag_metatable {}
local translate = wesnoth.textdomain ""wesnoth""

local function filter_false(arr)
	local result = {}
	for _, v in ipairs(arr) do
		if v ~= false then
			result[#result + 1] = v
		end
	end
	return result
end


function pickadvance.show_dialog_unsynchronized(advance_info, unit)
	local spacer = ""\n""
	local label = ""Plan advance:""

	local unit_type_options = advance_info.type_advances
	--print_as_json(""advances for"", unit.type, unit_type_options)
	local options = {}
	for _, ut in ipairs(unit_type_options) do
		options[#options + 1] = wesnoth.unit_types[ut]
	end
	local show_images = true

	local unit_override_one = (advance_info.unit_override or {})[2] == nil
		and (advance_info.unit_override or {})[1] or nil
	local game_override_one = (advance_info.game_override or {})[2] == nil
		and (advance_info.game_override or {})[1] or nil

	local description_row = T.row {
		T.column { T.label { use_markup = true, label = label } },
	}

	local list_sub_row
	if show_images then
		list_sub_row = T.row {
			T.column { T.image { id = ""the_icon"" } },
			T.column { grow_factor = 0, T.label { use_markup = true, id = ""the_label"" } },
			T.column { grow_factor = 1, T.spacer {} },
		}
	else
		list_sub_row = T.row {
			T.column { horizontal_alignment = ""left"", T.label { use_markup = true, id = ""the_label"" } }
		}
	end

	local toggle_panel = T.toggle_panel { return_value = -1, T.grid { list_sub_row } }

	local list_definition = T.list_definition { T.row { T.column { horizontal_grow = true, toggle_panel } } }

	local listbox = T.listbox { id = ""the_list"", list_definition, has_minimum = true }

	local reset_button = T.button {
		return_value = -3,
		label = ""\n"" .. translate(""Reset"") .. ""\n""
	}
	local reset_column = (unit_override_one or game_override_one)
		and T.column { horizontal_grow = true, reset_button }
		or false

	local help_button = T.button {
		return_value = -4,
		label = ""\n"" .. translate(""Help"") .. ""\n""
	}

	local reset_help_buttons = T.grid {
		T.row(filter_false {
			reset_column,
			T.column { horizontal_grow = true, help_button }
		})
	}
	local unit_button_label = unit.canrecruit and ""\nSave\n"" or ""\nSave for unit\n""
	local unit_button = T.button { return_value = -1, label = unit_button_label }
	local recruits_subbutton = T.button { return_value = 1, label = ""\nSave for this unit and new\n"" }
	local recruits_button = not unit.canrecruit
		and T.row { T.column { horizontal_grow = true, recruits_subbutton } }

	local dialog = {
		T.tooltip { id = ""tooltip_large"" },
		T.helptip { id = ""tooltip_large"" },
		T.grid(filter_false {
			T.row { T.column { T.spacer { width = 250 } } },
			description_row,
			T.row { T.column { horizontal_grow = true, listbox } },
			T.row { T.column { horizontal_grow = true, unit_button } },
			recruits_button,
			T.row { T.column { horizontal_grow = true, reset_help_buttons } },
		})
	}

	local function preshow()
		for i, advance_type in ipairs(options) do
			local text = spacer .. advance_type.name
			if advance_type.id == unit_override_one then
				text = text .. "" &lt;-unit""
			end
			if advance_type.id == game_override_one then
				text = text .. "" &lt;-recruits""
			end
			text = text .. ""  "" .. spacer
			wesnoth.set_dialog_value(text, ""the_list"", i, ""the_label"")
			local img = advance_type.__cfg.image
			wesnoth.set_dialog_value(img or ""misc/blank-hex.png"", ""the_list"", i, ""the_icon"")
		end

		wesnoth.set_dialog_focus(""the_list"")

		local function select()
			local i = wesnoth.get_dialog_value ""the_list""
			if i > 0 then
				local img = options[i].__cfg.image
				wesnoth.set_dialog_value(img or ""misc/blank-hex.png"", ""the_list"", i, ""the_icon"")
			end
		end
		wesnoth.set_dialog_callback(select, ""the_list"")
	end

	local item_result
	local function postshow()
		item_result = wesnoth.get_dialog_value(""the_list"")
	end

	local dialog_exit_code = wesnoth.show_dialog(dialog, preshow, postshow)
	local is_help = dialog_exit_code == -4
	local is_reset = dialog_exit_code == -3
	--local is_cancel = dialog_exit_code == -2
	if is_help then
		wesnoth.wml_actions.message {
			speaker = ""narrator"",
			message = ""<b>Save for unit</b> will make your unit always advance to said type. ""
				.. ""Even if it's leveled during enemy-s turn.""
				.. ""\n\n""
				.. ""<b>Save for game</b> applies to all new recruits of same type in game.""
				.. ""\n\n""
				.. wesnoth.get_variable(""pickadvance_contacts""),
			image = ""misc/qmark.png~SCALE(200,200)""
		}
	end
	local is_ok = dialog_exit_code > -2 and item_result >= 1
	--print(string.format(""Button %s pressed (%s). Item %s selected: %s"",
	--	dialog_exit_code, is_ok and ""ok"" or ""not ok"", item_result, options[item_result].id))
	local game_scope = dialog_exit_code == 1
	return {
		is_unit_override = is_reset or is_ok,
		unit_override = is_ok and options[item_result].id
			or is_reset and table.concat(unit_type_options, "",""),
		is_game_override = is_reset or game_scope,
		game_override = game_scope and options[item_result].id or nil,
	}
end

-- "
		[/lua]
		[lua]
			code="-- pick_advance/main.lua

local pickadvance = pickadvance
local ipairs = ipairs
local string = string
local table = table
local wesnoth = wesnoth
local wml = wml
local on_event = wesnoth.require(""lua/on_event.lua"")
local T = wesnoth.require(""lua/helper.lua"").set_wml_tag_metatable {}

wesnoth.wml_actions.set_menu_item {
	id = ""pickadvance"",
	description = ""Pick Advance"",
	T.show_if {
		T.lua {
			code = ""return pickadvance.menu_available()""
		},
	},
	T.command {
		T.lua {
			code = ""pickadvance.pick_advance()""
		}
	}
}

local function clean_type_func(unit_type)
	return string.gsub(unit_type, ""[^a-zA-Z0-9]"", ""_"")
end

local function split_comma_units(string_to_split)
	local result = {}
	local n = 1
	for s in string.gmatch(string_to_split or """", ""[^,]+"") do
		if s ~= """" and s ~= ""null"" and wesnoth.unit_types[s] then
			result[n] = s
			n = n + 1
		end
	end
	return result
end


local function original_advances(unit)
	local clean_type = clean_type_func(unit.type)
	local variable = unit.variables[""pickadvance_orig_"" .. clean_type] or """"
	return split_comma_units(variable), clean_type_func(variable)
end

local function set_advances(unit, array)
	wesnoth.add_modification(unit, ""object"", {
		id = ""pickadvance"",
		take_only_once = false,
		T.effect {
			apply_to = ""new_advancement"",
			replace = true,
			types = table.concat(array, "","")
		}
	})
end


local function array_to_set(arr)
	local result = {}
	for _, v in ipairs(arr) do
		result[v] = true
	end
	return result
end

local function array_filter(arr, func)
	local result = {}
	for _, v in ipairs(arr) do
		if func(v) then
			result[#result + 1] = v
		end
	end
	return result
end

--- works as anti-cheat and fixes tricky bugs in [male]/[female]/undead variation overrides
local function filter_overrides(unit, overrides)
	local possible_advances_array = original_advances(unit)
	local possible_advances = array_to_set(possible_advances_array)
	local filtered = array_filter(overrides, function(e) return possible_advances[e] end)
	return #filtered > 0 and filtered or possible_advances_array
end


local function get_advance_info(unit)
	local type_advances, orig_options_sanitized = original_advances(unit)
	local game_override_key = ""pickadvance_side"" .. unit.side .. ""_"" .. orig_options_sanitized
	local game_override = wesnoth.get_variable(game_override_key)
	local function correct(override)
		return override and #override > 0 and #override < #type_advances and override or nil
	end

	return {
		type_advances = type_advances,
		unit_override = correct(unit.advances_to),
		game_override = correct(split_comma_units(game_override)),
	}
end


function pickadvance.menu_available()
	local unit = wesnoth.get_unit(wml.variables.x1, wml.variables.y1)
	return unit and
		#unit.advances_to > 0
		and wesnoth.sides[unit.side].is_local and wesnoth.sides[unit.side].controller == ""human""
		and (#original_advances(unit) > 1 or #unit.advances_to > 1)
end


local function initialize_unit(unit)
	local clean_type = clean_type_func(unit.type)
	if unit.variables[""pickadvance_orig_"" .. clean_type] == nil then
		wesnoth.wml_actions.remove_object {
			object_id = ""pickadvance"",
			id = unit.id
		}
		unit.variables[""pickadvance_orig_"" .. clean_type] = table.concat(unit.advances_to, "","")
		local advance_info = get_advance_info(unit)
		local desired = advance_info.game_override or unit.advances_to
		desired = filter_overrides(unit, desired)
		set_advances(unit, desired)
		-- print_as_json(""initialized unit"", unit.id, unit.advances_to)
	end
end


function pickadvance.pick_advance(unit)
	unit = unit or wesnoth.get_unit(wml.variables.x1, wml.variables.y1)
	initialize_unit(unit)
	local _, orig_options_sanitized = original_advances(unit)
	local dialog_result = wesnoth.synchronize_choice(function()
		local local_result = pickadvance.show_dialog_unsynchronized(get_advance_info(unit), unit)
		-- print_as_json(""locally chosen advance for unit"", unit.id, local_result)
		return local_result
	end, function() return { is_ai = true } end)
	if dialog_result.is_ai then
		return
	end
	-- print_as_json(""applying manual choice for"", unit.id, dialog_result)
	dialog_result.unit_override = split_comma_units(dialog_result.unit_override)
	dialog_result.game_override = split_comma_units(dialog_result.game_override)
	dialog_result.unit_override = filter_overrides(unit, dialog_result.unit_override)
	dialog_result.game_override = filter_overrides(unit, dialog_result.game_override)
	if dialog_result.is_unit_override then
		set_advances(unit, dialog_result.unit_override)
	end
	if dialog_result.is_game_override then
		local key = ""pickadvance_side"" .. unit.side .. ""_"" .. orig_options_sanitized
		wesnoth.set_variable(key, table.concat(dialog_result.game_override, "",""))
	end
end


local known_units = {}
local function make_unit_known(unit)  -- can be both unit or unit type
	local type = unit.type or unit.id
	if known_units[type] then return end
	print_as_json(""making unit known"", unit)
	known_units[type] = true
	wesnoth.add_known_unit(type)
	for _, advance in ipairs(unit.advances_to) do
		print_as_json(""going into advance"", advance)
		make_unit_known(wesnoth.unit_types[advance])
	end
end

local function initialize_unit_x1y1(ctx)
	local unit = wesnoth.get_unit(ctx.x1, ctx.y1)
	if not wesnoth.sides[unit.side].__cfg.allow_player then return end
	initialize_unit(unit)
	make_unit_known(unit)
	if #unit.advances_to > 1 and wml.variables.pickadvance_force_choice and unit.side == wesnoth.current.side then
		pickadvance.pick_advance(unit)
	end
end

local function humans_can_recruit()
	for _, side in ipairs(wesnoth.sides) do
		if #side.recruit ~= 0 and side.__cfg.allow_player then
			return true
		end
	end
end
local function map_has_keeps()
	local width,height,_ = wesnoth.get_map_size()
	for x = 1, width do
		for y = 1, height do
			local terr = wesnoth.get_terrain(x, y)
			local info = wesnoth.get_terrain_info(terr)
			if info.keep then
				return true
			end
		end
	end
end
on_event(""start"", -91, function()
	local map_has_recruits = humans_can_recruit() and map_has_keeps()
	wml.variables.pickadvance_force_choice = wml.variables.pickadvance_force_choice
		or not map_has_recruits
end)

local fresh_turn = false
on_event(""turn refresh"", -91, function()
	fresh_turn = true
end)
on_event(""moveto"", -91, function()
	if fresh_turn then
		fresh_turn = false
		if not wesnoth.sides[wesnoth.current.side].__cfg.allow_player then return end
		for _, unit in ipairs(wesnoth.get_units { side = wesnoth.current.side }) do
			if #unit.advances_to > 1 and wml.variables.pickadvance_force_choice and wesnoth.current.turn > 1 then
				pickadvance.pick_advance(unit)
				if #unit.advances_to > 1 then
					local len = #unit.advances_to
					local rand = wesnoth.random(len)
					unit.advances_to = { unit.advances_to[rand] }
				end
			else
				initialize_unit(unit)
			end
		end
	end
end)

on_event(""recruit"", -91, initialize_unit_x1y1)
on_event(""post advance"", -91, initialize_unit_x1y1)


-- "
		[/lua]
	[/event]
[event]

		name="preload"
		[lua]
			code="-- advertisement

local wesnoth = wesnoth
local string = string
local tostring = tostring
local wml = wml
local on_event = wesnoth.require(""lua/on_event.lua"")

local addon_name = tostring((...).name)
local addon_dir = tostring((...).dir)
local addon_about = tostring((...).about)
local addon_icon = tostring((...).icon)

local function show_message(text)
	wesnoth.wml_actions.message {
		caption = addon_name,
		message = text,
		image = string.gsub(addon_icon, ""\n"", """") .. ""~SCALE_INTO(144,144)"",
	}
end

local filename = ""~add-ons/"" .. addon_dir .. ""/target/version.txt""
local my_version = wesnoth.have_file(filename) and wesnoth.read_file(filename) or ""0.0.0""

local highest_ver_key = ""addon_"" .. addon_dir .. ""_highest""
wml.variables[highest_ver_key] = my_version

on_event(""side turn 1"", function()
	local side_version = wesnoth.synchronize_choice(function() return { v = my_version } end).v
	if rawget(_G, ""print_as_json"") then _G.print_as_json(""addon"", addon_name, wesnoth.current.side, side_version) end

	if wesnoth.compare_versions(side_version, "">"", wml.variables[highest_ver_key]) then
		wml.variables[highest_ver_key] = side_version
	end
end)

if my_version == ""0.0.0"" then
	local text = ""This game uses "" .. addon_name .. "" add-on. ""
		.. ""\n""
		.. ""If you'll like it, feel free to install it from add-ons server.""
		.. ""\n\n""
		.. ""======================\n\n""
		.. addon_about
	show_message(text)
	return
end

on_event(""turn 2"", function()
	if my_version == wml.variables[highest_ver_key] then
		return
	end

	local advertisement = ""ü†âü†âü†â Please upgrade your "" .. addon_name .. "" add-on ü†âü†âü†â""
		.. ""\n""
		.. my_version .. "" -> "" .. wml.variables[highest_ver_key]
		.. ""  (you may do that after the game)\n\n""
	show_message(advertisement)
end)


-- "
			[args]
				about="In multiplayer game, you do not control unit advances if they happen on enemy turn.
With this add-on, you can set them beforehand:

* for one exact unit
* for all new recruits
"
				dir="pick_advance"
				icon="misc/blank-hex.png~BLIT(lobby/status-lobby-s.png~SCALE(36,36),0,36)~BLIT(units/elves-wood/avenger.png~CROP(20,12,47,47)~SCALE(36,36),36,0)~BLIT(units/elves-wood/marksman.png~CROP(16,12,47,47)~SCALE(36,36),36,36)
"
				name="Plan Unit Advance"
			[/args]
		[/lua]
	[/event]
[event]

		first_time_only=no
		name="prestart"
		[switch]
			variable="Rav_Color_Blue"
			[case]
				value="custom"
				[set_variable]
					name="Rav_Color_custom_Blue"
					value=yes
				[/set_variable]
			[/case]
			[case]
				value="core"
				[set_variable]
					name="Rav_Color_Light_Blue"
					value=yes
				[/set_variable]
			[/case]
		[/switch]
		[lua]
			code="

local Rav_Color_Yellow = wesnoth.get_variable ""Rav_Color_Yellow""
local Rav_Color_Blue = wesnoth.get_variable ""Rav_Color_custom_Blue""
local Rav_Color_Light_Blue = wesnoth.get_variable ""Rav_Color_Light_Blue""
local Rav_Color_Purple = wesnoth.get_variable ""Rav_Color_Purple""
local Rav_Color_Cyan = wesnoth.get_variable ""Rav_Color_Cyan""
local Rav_Color_Pink = wesnoth.get_variable ""Rav_Color_Pink""

-- Not unsetting those variables, so that I can see them from ageless unsynced menu
-- wesnoth.set_variable ""Rav_Color_Yellow""
-- NOTE the WML ""Rav_Color_Blue"" is now not required for this Lua script
-- And Rav_Color_custom_Blue is not needed for ageless, and info of Rav_Color_Light_Blue can be seen from Rav_Color_Blue now
wesnoth.set_variable ""Rav_Color_custom_Blue""
wesnoth.set_variable ""Rav_Color_Light_Blue""
-- wesnoth.set_variable ""Rav_Color_Purple""
-- wesnoth.set_variable ""Rav_Color_Cyan""
-- wesnoth.set_variable ""Rav_Color_Pink""

-- https://wiki.wesnoth.org/LuaWML/Sides#wesnoth.set_side_id
for i,v in ipairs(wesnoth.sides) do
	if(v.color == ""brown"" or v.color == ""6"") then
		if(Rav_Color_Yellow) then
			wesnoth.set_side_id(i,"""",""Rav_yellow"")
		else
			wesnoth.set_side_id(i,"""",""gold"")
		end
	end
	if(v.color == ""blue"" or v.color == ""2"") then
		if(Rav_Color_Blue) then
			wesnoth.set_side_id(i,"""",""Rav_blue_light"")
		elseif(Rav_Color_Light_Blue) then
			wesnoth.set_side_id(i,"""",""lightblue"")
		end
	end
	if(v.color == ""teal"" or v.color == ""9"") then
		if(Rav_Color_Cyan) then
			wesnoth.set_side_id(i,"""",""Rav_cyan"")
		end
	end
	if(v.color == ""purple"" or v.color == ""4"") then
		if(Rav_Color_Purple) then
			wesnoth.set_side_id(i,"""",""Rav_purple_light"")
		end
	end
	if(v.color == ""black"" or v.color == ""5"") then
		if(Rav_Color_Pink) then
			wesnoth.set_side_id(i,"""",""Rav_pink"")
		end
	end	
end
			"
		[/lua]
	[/event]
[event]

		name="prestart"
		[lua]
			code=" wesnoth.require(""multiplayer/eras.lua"").quick_4mp_leaders(...) "
			[args]
				[trait]
					female_name=_"female^quick"
					help_text=_"<italic>text='Quick'</italic> units have 1 extra movement point, but 5% less hitpoints than usual." +
						_"

Quick is the most noticeable trait, particularly in slower moving units such as trolls or heavy infantry. Units with the quick trait often have greatly increased mobility in rough terrain, which can be important to consider when deploying your forces. Also, quick units aren‚Äôt quite as tough as units without this trait and are subsequently less good at holding contested positions."
					id="quick"
					male_name=_"quick"
					[effect]
						apply_to="movement"
						increase=1
					[/effect]
					[effect]
						apply_to="hitpoints"
						increase_total="-5%"
					[/effect]
				[/trait]
			[/args]
		[/lua]
	[/event]
[event]

		name="time over"
		[lua]
			code=" wesnoth.require(""multiplayer/eras.lua"").turns_over_advantage() "
		[/lua]
	[/event]
[side]
allow_changes="yes"
allow_player="yes"
canrecruit="yes"
chose_random="yes"
color="purple"
controller="human"
current_player="Sergeant"
faction="Loyalists"
faction_name="Loyalists"
fog="yes"
gender="male"
gold="75"
income="0"
is_host="no"
is_local="no"
leader="Lieutenant,Swordsman,Pikeman,Javelineer,Shock Trooper,Longbowman,White Mage,Red Mage"
name="Sergeant"
player_id="Sergeant"
random_leader="Lieutenant,Swordsman,Pikeman,Javelineer,Longbowman,White Mage,Red Mage"
recruit="Cavalryman,Horseman,Spearman,Fencer,Heavy Infantryman,Bowman,Mage,Merman Fighter"
shroud="no"
side="1"
team_name="south-west"
terrain_liked="Gg,Ww,Wo"
type="Lieutenant"
user_team_name="wesnoth-multiplayerteamname^Southwest"
village_gold="2"
village_support="1"
[ai]

			villages_per_scout=16
		[/ai]
[default_faction]

		[/default_faction]
[ai]
recruitment_pattern="fighter,fighter,fighter,archer,mixed fighter,scout"
[/ai]
[/side]
[side]
allow_changes="yes"
canrecruit="yes"
chose_random="yes"
color="blue"
controller="human"
current_player="filfighter"
faction="Undead"
faction_name="Undead"
fog="yes"
gender="male"
gold="75"
income="0"
is_host="no"
is_local="no"
leader="Dark Sorcerer,Revenant,Deathblade,Bone Shooter,Necrophage"
name="filfighter"
player_id="filfighter"
random_leader="Dark Sorcerer,Revenant,Deathblade,Bone Shooter"
recruit="Skeleton,Skeleton Archer,Walking Corpse,Ghost,Vampire Bat,Dark Adept,Ghoul"
shroud="no"
side="2"
team_name="north-east"
terrain_liked="Ss,Hh,Ha,Ww"
type="Revenant"
user_team_name="wesnoth-multiplayerteamname^Northeast"
village_gold="2"
village_support="1"
[ai]

			villages_per_scout=16
		[/ai]
[default_faction]

		[/default_faction]
[ai]
recruitment_pattern="fighter,fighter,archer,fighter,scout,archer"
[/ai]
[/side]
[side]
allow_changes="yes"
allow_player="yes"
canrecruit="yes"
chose_random="yes"
color="green"
controller="human"
current_player="Luckwine"
faction="Northerners"
faction_name="Northerners"
fog="yes"
gender="male"
gold="75"
income="0"
is_host="no"
is_local="no"
leader="Orcish Warrior,Troll,Troll Rocklobber,Orcish Crossbowman,Orcish Slayer"
name="Luckwine"
player_id="Luckwine"
recruit="Orcish Grunt,Troll Whelp,Wolf Rider,Orcish Archer,Orcish Assassin,Naga Fighter,Goblin Spearman"
shroud="no"
side="3"
team_name="north-east"
terrain_liked="Hh,Ha,Mm,Ss"
type="Orcish Crossbowman"
user_team_name="wesnoth-multiplayerteamname^Northeast"
village_gold="2"
village_support="1"
[ai]

			villages_per_scout=16
		[/ai]
[default_faction]

		[/default_faction]
[ai]
recruitment_pattern="fighter,fighter,fighter,mixed fighter,archer,scout"
[/ai]
[/side]
[side]
allow_changes="yes"
canrecruit="yes"
chose_random="yes"
color="red"
controller="human"
current_player="FLORIS"
faction="Northerners"
faction_name="Northerners"
fog="yes"
gender="male"
gold="75"
income="0"
is_host="yes"
is_local="no"
leader="Orcish Warrior,Troll,Troll Rocklobber,Orcish Crossbowman,Orcish Slayer"
name="FLORIS"
player_id="FLORIS"
recruit="Orcish Grunt,Troll Whelp,Wolf Rider,Orcish Archer,Orcish Assassin,Naga Fighter,Goblin Spearman"
shroud="no"
side="4"
team_name="south-west"
terrain_liked="Hh,Ha,Mm,Ss"
type="Troll Rocklobber"
user_team_name="wesnoth-multiplayerteamname^Southwest"
village_gold="2"
village_support="1"
[ai]

			villages_per_scout=16
		[/ai]
[default_faction]

		[/default_faction]
[ai]
recruitment_pattern="fighter,fighter,fighter,mixed fighter,archer,scout"
[/ai]
[/side]
[/scenario]
[carryover_sides_start]

	next_scenario="multiplayer_Isars_Cross"
	random_calls=0
	random_seed=945092726
	[variables]
		Rav_Color_Blue="custom"
		Rav_Color_Cyan=yes
		Rav_Color_Pink=yes
		Rav_Color_Purple=yes
		Rav_Color_Yellow=yes
		pickadvance_force_choice=no
	[/variables]
[/carryover_sides_start]
[multiplayer]

	active_mods="plan_unit_advance,Rav_Color_Mod"
	difficulty_define="NORMAL"
	experience_modifier=70
	hash="OnGq5+738U3QMo8I2lwk0k,+zkmJDIjDOA>Q<7NRRrmMfwBTo1cxFVhK.h7Hgk77MChIzs+05MiblkebR8zoQJ<xrJB4liEP3smjfTzE1NIHqf<IoHh,<xXKlzKIiwGw"
	mp_campaign=""
	mp_campaign_name=""
	mp_countdown=no
	mp_countdown_action_bonus=13
	mp_countdown_init_time=270
	mp_countdown_reservoir_time=330
	mp_countdown_turn_bonus=60
	mp_era="era_default"
	mp_era_name="Default"
	mp_fog=yes
	mp_num_turns=-1
	mp_random_start_time=no
	mp_scenario="multiplayer_Isars_Cross"
	mp_scenario_name=_"4p ‚Äî Isar‚Äôs Cross"
	mp_shroud=no
	mp_use_map_settings=yes
	mp_village_gold=2
	mp_village_support=1
	observer=yes
	random_faction_mode="Independent"
	registered_users_only=no
	savegame=no
	scenario="FLORIS‚Äôs game"
	shuffle_sides=yes
	side_users=""
	[options]
		[modification]
			id="Rav_Color_Mod"
			[option]
				id="Rav_Color_Blue"
				value="custom"
			[/option]
			[option]
				id="Rav_Color_Cyan"
				value=yes
			[/option]
			[option]
				id="Rav_Color_Pink"
				value=yes
			[/option]
			[option]
				id="Rav_Color_Purple"
				value=yes
			[/option]
			[option]
				id="Rav_Color_Yellow"
				value=yes
			[/option]
		[/modification]
		[modification]
			id="plan_unit_advance"
			[option]
				id="pickadvance_force_choice"
				value=no
			[/option]
		[/modification]
	[/options]
	[addon]
		id="Color_Modification"
		name="Color Changer"
		version="1.2.0"
	[/addon]
[/multiplayer]
[era]

	description=_"The standard era for Wesnoth multiplayer. Consists of six factions and is generally balanced."
	id="era_default"
	name=_"Default"
	type="hybrid"
	[multiplayer_side]
		id="Custom"
		image="units/unknown-unit.png"
#textdomain wesnoth
		name=_"Custom"
	[/multiplayer_side]
	[multiplayer_side]
		id="Random"
		image="units/random-dice.png"
#textdomain wesnoth-multiplayer
		name=_"Random"
		random_faction=yes
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/humans/grand-knight.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Loyalists'</bold> are a faction of <ref>text='Humans' dst='..race_human'</ref> who are loyal to the throne of Wesnoth. Humans are a versatile race who specialize in many different areas. Similarly, the Loyalist faction is a very versatile melee-oriented faction with important ranged support from bowmen and mages."
		id="Loyalists"
		image="units/human-loyalists/lieutenant.png"
		leader="Lieutenant,Swordsman,Pikeman,Javelineer,Shock Trooper,Longbowman,White Mage,Red Mage"
		name=_"Loyalists"
		random_leader="Lieutenant,Swordsman,Pikeman,Javelineer,Longbowman,White Mage,Red Mage"
		recruit="Cavalryman,Horseman,Spearman,Fencer,Heavy Infantryman,Bowman,Mage,Merman Fighter"
		terrain_liked="Gg,Ww,Wo"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,fighter,archer,mixed fighter,scout"
		[/ai]
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/elves/druid.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Rebels'</bold> are a faction of <ref>text='Elves' dst='..race_elf'</ref> and their various forest-dwelling allies. They get their human name, Rebels, from the time of Heir to the Throne, when they started the rebellion against the evil Queen Asheviere. Elves are a magical race that are masters of the bow and are capable of living many years longer than humans. In harmony with nature, the elves find allies with the <ref>text='human' dst='..race_human'</ref> mages, certain <ref>text='merfolk' dst='..race_merman'</ref>, and tree creatures called <ref>text='Woses' dst='..race_wose'</ref>. Rebels are best played taking advantage of their high forest defense, mastery of ranged attacks, and the elves‚Äô neutral alignment."
		id="Rebels"
		image="units/elves-wood/captain.png"
		leader="Elvish Captain,Elvish Hero,Elvish Ranger,Elvish Marksman,Elvish Druid,Elvish Sorceress,White Mage,Red Mage,Elder Wose"
		name=_"Rebels"
		random_leader="Elvish Captain,Elvish Hero,Elvish Ranger,Elvish Marksman,Elvish Druid,Elvish Sorceress,White Mage,Red Mage"
		recruit="Elvish Fighter,Elvish Archer,Mage,Elvish Shaman,Elvish Scout,Wose,Merman Hunter"
		terrain_liked="Ff,Fa,Ss,Ww"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,archer,archer,mixed fighter,healer,scout"
		[/ai]
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/orcs/warlord.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Northerners'</bold> are a faction of <ref>text='Orcs' dst='..race_orc'</ref> and their allies who live in the north of the Great Continent, thus their name. Northerners consist of the warrior orcs race, the enslaved <ref>text='goblins' dst='..race_goblin'</ref>, <ref>text='trolls' dst='..race_troll'</ref> who are tricked into combat by the orcs, and the serpentine <ref>text='naga' dst='..race_naga'</ref>. The Northerners play best by taking advantage of having many low-cost and high HP soldiers."
		id="Northerners"
		image="units/orcs/warrior.png"
		leader="Orcish Warrior,Troll,Troll Rocklobber,Orcish Crossbowman,Orcish Slayer"
		name=_"Northerners"
		recruit="Orcish Grunt,Troll Whelp,Wolf Rider,Orcish Archer,Orcish Assassin,Naga Fighter,Goblin Spearman"
		terrain_liked="Hh,Ha,Mm,Ss"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,fighter,mixed fighter,archer,scout"
		[/ai]
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/undead/spectre.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Undead'</bold> are a faction of <ref>text='undead' dst='..race_undead'</ref> creatures and <ref>text='human' dst='..race_human'</ref> practitioners of dark arts that usually accompany them. Often, these ‚ÄúDark Adepts‚Äù are the units that do the most damage for the faction, but they have a major vulnerability ‚Äî their practicing of this forbidden, evil magic has consumed all their energy and so they have no melee attack at all. The Undead are a very aggressive faction and the most powerful <ref>text='Default Era' dst='..era_era_default'</ref> faction at nighttime."
		id="Undead"
		image="units/undead-necromancers/dark-sorcerer.png"
		leader="Dark Sorcerer,Revenant,Deathblade,Bone Shooter,Necrophage"
		name=_"Undead"
		random_leader="Dark Sorcerer,Revenant,Deathblade,Bone Shooter"
		recruit="Skeleton,Skeleton Archer,Walking Corpse,Ghost,Vampire Bat,Dark Adept,Ghoul"
		terrain_liked="Ss,Hh,Ha,Ww"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,archer,fighter,scout,archer"
		[/ai]
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/dwarves/ulfserker.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Knalgan Alliance'</bold> is a faction of <ref>text='Dwarves' dst='..race_dwarf'</ref> and their outlaw <ref>text='Human' dst='..race_human'</ref> allies. Dwarves are an old race who live underground and have tough, but short, warriors. The outlaws are humans who are not socially acceptable among others of their race, but have become allies of the dwarves due to common enemies. This leads to a combination of tough and defensive dwarves who are only good on certain terrain and humans who can cover ground that dwarves are not good at fighting in."
		id="Knalgan Alliance"
		image="units/dwarves/steelclad.png"
		leader="Dwarvish Steelclad,Dwarvish Thunderguard,Dwarvish Stalwart,Rogue,Trapper"
		name=_"Knalgan Alliance"
		recruit="Dwarvish Guardsman,Dwarvish Fighter,Dwarvish Ulfserker,Dwarvish Thunderer,Thief,Poacher,Footpad,Gryphon Rider"
		terrain_liked="Hh,Ha,Mm"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,fighter,mixed fighter,archer,scout"
		[/ai]
	[/multiplayer_side]
	[multiplayer_side]
		description="<img>src='portraits/drakes/inferno.png~BG()' align='middle'</img>

" +
			_"The <bold>text='Drakes'</bold> are a faction of dragon-like <ref>text='Drakes' dst='..race_drake'</ref> and their lizard <ref>text='Saurian' dst='..race_lizard'</ref> allies. Drakes are descendants of dragons, but smaller in size. Saurians are considerably smaller than Drakes and from different ancestry. Together, the Drake faction has high mobility but low defense, leading to unusual tactics for a <ref>text='Default Era' dst='..era_era_default'</ref> faction."
		id="Drakes"
		image="units/drakes/flare.png"
		leader="Drake Flare,Fire Drake,Drake Arbiter,Drake Thrasher,Drake Warrior,Saurian Oracle,Saurian Soothsayer"
		name=_"Drakes"
		random_leader="Drake Flare,Fire Drake,Drake Arbiter,Drake Thrasher,Drake Warrior"
		recruit="Drake Burner,Drake Clasher,Drake Glider,Drake Fighter,Saurian Skirmisher,Saurian Augur"
		terrain_liked="Hh,Ha,Ds,Ss"
		type="random"
		[ai]
			recruitment_pattern="fighter,fighter,archer,healer,scout,scout"
		[/ai]
	[/multiplayer_side]
	[event]
		name="prestart"
		[lua]
			code=" wesnoth.require(""multiplayer/eras.lua"").quick_4mp_leaders(...) "
			[args]
				[trait]
#textdomain wesnoth-help
					female_name=_"female^quick"
					help_text=_"<italic>text='Quick'</italic> units have 1 extra movement point, but 5% less hitpoints than usual." +
						_"

Quick is the most noticeable trait, particularly in slower moving units such as trolls or heavy infantry. Units with the quick trait often have greatly increased mobility in rough terrain, which can be important to consider when deploying your forces. Also, quick units aren‚Äôt quite as tough as units without this trait and are subsequently less good at holding contested positions."
					id="quick"
					male_name=_"quick"
					[effect]
						apply_to="movement"
						increase=1
					[/effect]
					[effect]
						apply_to="hitpoints"
						increase_total="-5%"
					[/effect]
				[/trait]
			[/args]
		[/lua]
	[/event]
	[event]
		name="time over"
		[lua]
			code=" wesnoth.require(""multiplayer/eras.lua"").turns_over_advantage() "
		[/lua]
	[/event]
[/era]
[modification]

	addon_id="pick_advance"
	addon_title="Plan Unit Advance"
	addon_version="1.11.0"
	description="In multiplayer game, you do not control unit advances if they happen on enemy turn.
With this add-on, you can set them beforehand:

* for one exact unit
* for all new recruits
"
	id="plan_unit_advance"
	name="Plan Unit Advance"
	[options]
		[checkbox]
			default=no
#textdomain wesnoth
			description=_"You will be asked a question on choosing advancement whenever an undecided unit appears.

Always enabled for RPG eras and maps."
			id="pickadvance_force_choice"
			name=_"Force advancement planning"
		[/checkbox]
	[/options]
	[event]
		first_time_only=no
		name="preload"
		[set_variable]
			name="pickadvance_contacts"
			value="Contacts:
* Source code, issue tracker: https://github.com/vgaming/pick_advance
* BTC: 148AvMtozrKs3MzXCNMGNUTHLoqahw3fCo
* vasya: my name on wesnoth :)
* vn971 on IRC.freenode.net (I often visit #wesnoth-umc-dev)
"
		[/set_variable]
		[lua]
			code="-- json_format

-- wesnoth.dofile(""~add-ons/pick_advance/lua/json_format.lua"")

local next = next
local print = print
local tostring = tostring
local type = type
local gsub = string.gsub
local table = table

local delete_chars = string.char(00, 01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12, 13, 14, 15,
	16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31) -- https://www.ietf.org/rfc/rfc4627.txt
local delete_regexp = ""["" .. delete_chars .. ""]""

-- escaping takes 3/4 of the time, but we can't avoid it...
local function escape(str)
	str = gsub(str, delete_regexp, """")
	str = gsub(str, '\\', '\\\\')
	return gsub(str, '""', '\\""')
end

local function print_table_key(obj, buffer)
	local _type = type(obj)
	if _type == ""string"" then
		buffer[#buffer + 1] = escape(obj)
	elseif _type == ""number"" then
		buffer[#buffer + 1] = obj
	elseif _type == ""boolean"" then
		buffer[#buffer + 1] = tostring(obj)
	else
		buffer[#buffer + 1] = '???' .. _type .. '???'
	end
end

local function format_any_value(obj, buffer)
	local _type = type(obj)
	if _type == ""table"" then
		buffer[#buffer + 1] = '{'
		buffer[#buffer + 1] = '""' -- needs to be separate for empty tables {}
		for key, value in next, obj, nil do
			print_table_key(key, buffer)
			buffer[#buffer + 1] = '"":'
			format_any_value(value, buffer)
			buffer[#buffer + 1] = ',""'
		end
		buffer[#buffer] = '}' -- note the overwrite
	elseif _type == ""string"" then
		buffer[#buffer + 1] = '""' .. escape(obj) .. '""'
	elseif _type == ""boolean"" or _type == ""number"" then
		buffer[#buffer + 1] = tostring(obj)
	elseif _type == ""userdata"" then
		buffer[#buffer + 1] = '""' .. escape(tostring(obj)) .. '""'
	else
		buffer[#buffer + 1] = '""???' .. _type .. '???""'
	end
end

local function _format_as_json(obj)
	if obj == nil then return ""null"" else
		local buffer = {}
		format_any_value(obj, buffer)
		return table.concat(buffer)
	end
end

local function _print_as_json(...)
	local result = {}
	local n = 1
	for _, v in ipairs({ ... }) do
		result[n] = _format_as_json(v)
		n = n + 1
	end
	print(table.concat(result, ""\t""))
end


format_as_json = _format_as_json
print_as_json = _print_as_json

-- "
		[/lua]
		[lua]
			code="-- pickadvance_dialog

pickadvance = {}
local pickadvance = pickadvance
local wesnoth = wesnoth
local ipairs = ipairs
local table = table
local T = wesnoth.require(""lua/helper.lua"").set_wml_tag_metatable {}
local translate = wesnoth.textdomain ""wesnoth""

local function filter_false(arr)
	local result = {}
	for _, v in ipairs(arr) do
		if v ~= false then
			result[#result + 1] = v
		end
	end
	return result
end


function pickadvance.show_dialog_unsynchronized(advance_info, unit)
	local spacer = ""\n""
	local label = ""Plan advance:""

	local unit_type_options = advance_info.type_advances
	--print_as_json(""advances for"", unit.type, unit_type_options)
	local options = {}
	for _, ut in ipairs(unit_type_options) do
		options[#options + 1] = wesnoth.unit_types[ut]
	end
	local show_images = true

	local unit_override_one = (advance_info.unit_override or {})[2] == nil
		and (advance_info.unit_override or {})[1] or nil
	local game_override_one = (advance_info.game_override or {})[2] == nil
		and (advance_info.game_override or {})[1] or nil

	local description_row = T.row {
		T.column { T.label { use_markup = true, label = label } },
	}

	local list_sub_row
	if show_images then
		list_sub_row = T.row {
			T.column { T.image { id = ""the_icon"" } },
			T.column { grow_factor = 0, T.label { use_markup = true, id = ""the_label"" } },
			T.column { grow_factor = 1, T.spacer {} },
		}
	else
		list_sub_row = T.row {
			T.column { horizontal_alignment = ""left"", T.label { use_markup = true, id = ""the_label"" } }
		}
	end

	local toggle_panel = T.toggle_panel { return_value = -1, T.grid { list_sub_row } }

	local list_definition = T.list_definition { T.row { T.column { horizontal_grow = true, toggle_panel } } }

	local listbox = T.listbox { id = ""the_list"", list_definition, has_minimum = true }

	local reset_button = T.button {
		return_value = -3,
		label = ""\n"" .. translate(""Reset"") .. ""\n""
	}
	local reset_column = (unit_override_one or game_override_one)
		and T.column { horizontal_grow = true, reset_button }
		or false

	local help_button = T.button {
		return_value = -4,
		label = ""\n"" .. translate(""Help"") .. ""\n""
	}

	local reset_help_buttons = T.grid {
		T.row(filter_false {
			reset_column,
			T.column { horizontal_grow = true, help_button }
		})
	}
	local unit_button_label = unit.canrecruit and ""\nSave\n"" or ""\nSave for unit\n""
	local unit_button = T.button { return_value = -1, label = unit_button_label }
	local recruits_subbutton = T.button { return_value = 1, label = ""\nSave for this unit and new\n"" }
	local recruits_button = not unit.canrecruit
		and T.row { T.column { horizontal_grow = true, recruits_subbutton } }

	local dialog = {
		T.tooltip { id = ""tooltip_large"" },
		T.helptip { id = ""tooltip_large"" },
		T.grid(filter_false {
			T.row { T.column { T.spacer { width = 250 } } },
			description_row,
			T.row { T.column { horizontal_grow = true, listbox } },
			T.row { T.column { horizontal_grow = true, unit_button } },
			recruits_button,
			T.row { T.column { horizontal_grow = true, reset_help_buttons } },
		})
	}

	local function preshow()
		for i, advance_type in ipairs(options) do
			local text = spacer .. advance_type.name
			if advance_type.id == unit_override_one then
				text = text .. "" &lt;-unit""
			end
			if advance_type.id == game_override_one then
				text = text .. "" &lt;-recruits""
			end
			text = text .. ""  "" .. spacer
			wesnoth.set_dialog_value(text, ""the_list"", i, ""the_label"")
			local img = advance_type.__cfg.image
			wesnoth.set_dialog_value(img or ""misc/blank-hex.png"", ""the_list"", i, ""the_icon"")
		end

		wesnoth.set_dialog_focus(""the_list"")

		local function select()
			local i = wesnoth.get_dialog_value ""the_list""
			if i > 0 then
				local img = options[i].__cfg.image
				wesnoth.set_dialog_value(img or ""misc/blank-hex.png"", ""the_list"", i, ""the_icon"")
			end
		end
		wesnoth.set_dialog_callback(select, ""the_list"")
	end

	local item_result
	local function postshow()
		item_result = wesnoth.get_dialog_value(""the_list"")
	end

	local dialog_exit_code = wesnoth.show_dialog(dialog, preshow, postshow)
	local is_help = dialog_exit_code == -4
	local is_reset = dialog_exit_code == -3
	--local is_cancel = dialog_exit_code == -2
	if is_help then
		wesnoth.wml_actions.message {
			speaker = ""narrator"",
			message = ""<b>Save for unit</b> will make your unit always advance to said type. ""
				.. ""Even if it's leveled during enemy-s turn.""
				.. ""\n\n""
				.. ""<b>Save for game</b> applies to all new recruits of same type in game.""
				.. ""\n\n""
				.. wesnoth.get_variable(""pickadvance_contacts""),
			image = ""misc/qmark.png~SCALE(200,200)""
		}
	end
	local is_ok = dialog_exit_code > -2 and item_result >= 1
	--print(string.format(""Button %s pressed (%s). Item %s selected: %s"",
	--	dialog_exit_code, is_ok and ""ok"" or ""not ok"", item_result, options[item_result].id))
	local game_scope = dialog_exit_code == 1
	return {
		is_unit_override = is_reset or is_ok,
		unit_override = is_ok and options[item_result].id
			or is_reset and table.concat(unit_type_options, "",""),
		is_game_override = is_reset or game_scope,
		game_override = game_scope and options[item_result].id or nil,
	}
end

-- "
		[/lua]
		[lua]
			code="-- pick_advance/main.lua

local pickadvance = pickadvance
local ipairs = ipairs
local string = string
local table = table
local wesnoth = wesnoth
local wml = wml
local on_event = wesnoth.require(""lua/on_event.lua"")
local T = wesnoth.require(""lua/helper.lua"").set_wml_tag_metatable {}

wesnoth.wml_actions.set_menu_item {
	id = ""pickadvance"",
	description = ""Pick Advance"",
	T.show_if {
		T.lua {
			code = ""return pickadvance.menu_available()""
		},
	},
	T.command {
		T.lua {
			code = ""pickadvance.pick_advance()""
		}
	}
}

local function clean_type_func(unit_type)
	return string.gsub(unit_type, ""[^a-zA-Z0-9]"", ""_"")
end

local function split_comma_units(string_to_split)
	local result = {}
	local n = 1
	for s in string.gmatch(string_to_split or """", ""[^,]+"") do
		if s ~= """" and s ~= ""null"" and wesnoth.unit_types[s] then
			result[n] = s
			n = n + 1
		end
	end
	return result
end


local function original_advances(unit)
	local clean_type = clean_type_func(unit.type)
	local variable = unit.variables[""pickadvance_orig_"" .. clean_type] or """"
	return split_comma_units(variable), clean_type_func(variable)
end

local function set_advances(unit, array)
	wesnoth.add_modification(unit, ""object"", {
		id = ""pickadvance"",
		take_only_once = false,
		T.effect {
			apply_to = ""new_advancement"",
			replace = true,
			types = table.concat(array, "","")
		}
	})
end


local function array_to_set(arr)
	local result = {}
	for _, v in ipairs(arr) do
		result[v] = true
	end
	return result
end

local function array_filter(arr, func)
	local result = {}
	for _, v in ipairs(arr) do
		if func(v) then
			result[#result + 1] = v
		end
	end
	return result
end

--- works as anti-cheat and fixes tricky bugs in [male]/[female]/undead variation overrides
local function filter_overrides(unit, overrides)
	local possible_advances_array = original_advances(unit)
	local possible_advances = array_to_set(possible_advances_array)
	local filtered = array_filter(overrides, function(e) return possible_advances[e] end)
	return #filtered > 0 and filtered or possible_advances_array
end


local function get_advance_info(unit)
	local type_advances, orig_options_sanitized = original_advances(unit)
	local game_override_key = ""pickadvance_side"" .. unit.side .. ""_"" .. orig_options_sanitized
	local game_override = wesnoth.get_variable(game_override_key)
	local function correct(override)
		return override and #override > 0 and #override < #type_advances and override or nil
	end

	return {
		type_advances = type_advances,
		unit_override = correct(unit.advances_to),
		game_override = correct(split_comma_units(game_override)),
	}
end


function pickadvance.menu_available()
	local unit = wesnoth.get_unit(wml.variables.x1, wml.variables.y1)
	return unit and
		#unit.advances_to > 0
		and wesnoth.sides[unit.side].is_local and wesnoth.sides[unit.side].controller == ""human""
		and (#original_advances(unit) > 1 or #unit.advances_to > 1)
end


local function initialize_unit(unit)
	local clean_type = clean_type_func(unit.type)
	if unit.variables[""pickadvance_orig_"" .. clean_type] == nil then
		wesnoth.wml_actions.remove_object {
			object_id = ""pickadvance"",
			id = unit.id
		}
		unit.variables[""pickadvance_orig_"" .. clean_type] = table.concat(unit.advances_to, "","")
		local advance_info = get_advance_info(unit)
		local desired = advance_info.game_override or unit.advances_to
		desired = filter_overrides(unit, desired)
		set_advances(unit, desired)
		-- print_as_json(""initialized unit"", unit.id, unit.advances_to)
	end
end


function pickadvance.pick_advance(unit)
	unit = unit or wesnoth.get_unit(wml.variables.x1, wml.variables.y1)
	initialize_unit(unit)
	local _, orig_options_sanitized = original_advances(unit)
	local dialog_result = wesnoth.synchronize_choice(function()
		local local_result = pickadvance.show_dialog_unsynchronized(get_advance_info(unit), unit)
		-- print_as_json(""locally chosen advance for unit"", unit.id, local_result)
		return local_result
	end, function() return { is_ai = true } end)
	if dialog_result.is_ai then
		return
	end
	-- print_as_json(""applying manual choice for"", unit.id, dialog_result)
	dialog_result.unit_override = split_comma_units(dialog_result.unit_override)
	dialog_result.game_override = split_comma_units(dialog_result.game_override)
	dialog_result.unit_override = filter_overrides(unit, dialog_result.unit_override)
	dialog_result.game_override = filter_overrides(unit, dialog_result.game_override)
	if dialog_result.is_unit_override then
		set_advances(unit, dialog_result.unit_override)
	end
	if dialog_result.is_game_override then
		local key = ""pickadvance_side"" .. unit.side .. ""_"" .. orig_options_sanitized
		wesnoth.set_variable(key, table.concat(dialog_result.game_override, "",""))
	end
end


local known_units = {}
local function make_unit_known(unit)  -- can be both unit or unit type
	local type = unit.type or unit.id
	if known_units[type] then return end
	print_as_json(""making unit known"", unit)
	known_units[type] = true
	wesnoth.add_known_unit(type)
	for _, advance in ipairs(unit.advances_to) do
		print_as_json(""going into advance"", advance)
		make_unit_known(wesnoth.unit_types[advance])
	end
end

local function initialize_unit_x1y1(ctx)
	local unit = wesnoth.get_unit(ctx.x1, ctx.y1)
	if not wesnoth.sides[unit.side].__cfg.allow_player then return end
	initialize_unit(unit)
	make_unit_known(unit)
	if #unit.advances_to > 1 and wml.variables.pickadvance_force_choice and unit.side == wesnoth.current.side then
		pickadvance.pick_advance(unit)
	end
end

local function humans_can_recruit()
	for _, side in ipairs(wesnoth.sides) do
		if #side.recruit ~= 0 and side.__cfg.allow_player then
			return true
		end
	end
end
local function map_has_keeps()
	local width,height,_ = wesnoth.get_map_size()
	for x = 1, width do
		for y = 1, height do
			local terr = wesnoth.get_terrain(x, y)
			local info = wesnoth.get_terrain_info(terr)
			if info.keep then
				return true
			end
		end
	end
end
on_event(""start"", -91, function()
	local map_has_recruits = humans_can_recruit() and map_has_keeps()
	wml.variables.pickadvance_force_choice = wml.variables.pickadvance_force_choice
		or not map_has_recruits
end)

local fresh_turn = false
on_event(""turn refresh"", -91, function()
	fresh_turn = true
end)
on_event(""moveto"", -91, function()
	if fresh_turn then
		fresh_turn = false
		if not wesnoth.sides[wesnoth.current.side].__cfg.allow_player then return end
		for _, unit in ipairs(wesnoth.get_units { side = wesnoth.current.side }) do
			if #unit.advances_to > 1 and wml.variables.pickadvance_force_choice and wesnoth.current.turn > 1 then
				pickadvance.pick_advance(unit)
				if #unit.advances_to > 1 then
					local len = #unit.advances_to
					local rand = wesnoth.random(len)
					unit.advances_to = { unit.advances_to[rand] }
				end
			else
				initialize_unit(unit)
			end
		end
	end
end)

on_event(""recruit"", -91, initialize_unit_x1y1)
on_event(""post advance"", -91, initialize_unit_x1y1)


-- "
		[/lua]
	[/event]
	[event]
		name="preload"
		[lua]
			code="-- advertisement

local wesnoth = wesnoth
local string = string
local tostring = tostring
local wml = wml
local on_event = wesnoth.require(""lua/on_event.lua"")

local addon_name = tostring((...).name)
local addon_dir = tostring((...).dir)
local addon_about = tostring((...).about)
local addon_icon = tostring((...).icon)

local function show_message(text)
	wesnoth.wml_actions.message {
		caption = addon_name,
		message = text,
		image = string.gsub(addon_icon, ""\n"", """") .. ""~SCALE_INTO(144,144)"",
	}
end

local filename = ""~add-ons/"" .. addon_dir .. ""/target/version.txt""
local my_version = wesnoth.have_file(filename) and wesnoth.read_file(filename) or ""0.0.0""

local highest_ver_key = ""addon_"" .. addon_dir .. ""_highest""
wml.variables[highest_ver_key] = my_version

on_event(""side turn 1"", function()
	local side_version = wesnoth.synchronize_choice(function() return { v = my_version } end).v
	if rawget(_G, ""print_as_json"") then _G.print_as_json(""addon"", addon_name, wesnoth.current.side, side_version) end

	if wesnoth.compare_versions(side_version, "">"", wml.variables[highest_ver_key]) then
		wml.variables[highest_ver_key] = side_version
	end
end)

if my_version == ""0.0.0"" then
	local text = ""This game uses "" .. addon_name .. "" add-on. ""
		.. ""\n""
		.. ""If you'll like it, feel free to install it from add-ons server.""
		.. ""\n\n""
		.. ""======================\n\n""
		.. addon_about
	show_message(text)
	return
end

on_event(""turn 2"", function()
	if my_version == wml.variables[highest_ver_key] then
		return
	end

	local advertisement = ""ü†âü†âü†â Please upgrade your "" .. addon_name .. "" add-on ü†âü†âü†â""
		.. ""\n""
		.. my_version .. "" -> "" .. wml.variables[highest_ver_key]
		.. ""  (you may do that after the game)\n\n""
	show_message(advertisement)
end)


-- "
			[args]
				about="In multiplayer game, you do not control unit advances if they happen on enemy turn.
With this add-on, you can set them beforehand:

* for one exact unit
* for all new recruits
"
				dir="pick_advance"
				icon="misc/blank-hex.png~BLIT(lobby/status-lobby-s.png~SCALE(36,36),0,36)~BLIT(units/elves-wood/avenger.png~CROP(20,12,47,47)~SCALE(36,36),36,0)~BLIT(units/elves-wood/marksman.png~CROP(16,12,47,47)~SCALE(36,36),36,36)
"
				name="Plan Unit Advance"
			[/args]
		[/lua]
	[/event]
[/modification]
[modification]

	addon_id="Color_Modification"
	addon_title="Color Changer"
	addon_version="1.2.0"
	description=_"The addon that aims to improve playing experience by replacing uncomfortable and dark colors with brighter ones. The only changed color with everything disabled will be Gold instead of Brown.
 
version 1.2 by Ravana"
	id="Rav_Color_Mod"
	name=_"Color Changer"
	require_modification=yes
	[options]
		[checkbox]
			default=yes
			description=_"Brown is replaced with Yellow instead of gold with this setting checked"
			id="Rav_Color_Yellow"
			name=_"Yellow instead of Gold"
		[/checkbox]
		[combo]
			default="custom"
			description=_"Change shade of blue"
			id="Rav_Color_Blue"
			name=_"This, instead of Blue: "
			[item]
				name=_"Light Blue"
				value="custom"
			[/item]
			[item]
				name=_"Dark Blue (no change)"
				value=no
			[/item]
			[item]
				name=_"Teal Light Blue"
				value="core"
			[/item]
		[/combo]
		[checkbox]
			default=yes
			description=_"Purple is replaced with Light Purple with this setting checked"
			id="Rav_Color_Purple"
			name=_"Light Purple instead of Purple"
		[/checkbox]
		[checkbox]
			default=yes
			description=_"Teal is replaced with Cyan with this setting checked"
			id="Rav_Color_Cyan"
			name=_"Cyan instead of Teal"
		[/checkbox]
		[checkbox]
			default=yes
			description=_"Black (Gray) is replaced with Pink with this setting checked"
			id="Rav_Color_Pink"
			name=_"Pink instead of Black"
		[/checkbox]
	[/options]
	[event]
		first_time_only=no
		name="prestart"
		[switch]
			variable="Rav_Color_Blue"
			[case]
				value="custom"
				[set_variable]
					name="Rav_Color_custom_Blue"
					value=yes
				[/set_variable]
			[/case]
			[case]
				value="core"
				[set_variable]
					name="Rav_Color_Light_Blue"
					value=yes
				[/set_variable]
			[/case]
		[/switch]
		[lua]
			code="

local Rav_Color_Yellow = wesnoth.get_variable ""Rav_Color_Yellow""
local Rav_Color_Blue = wesnoth.get_variable ""Rav_Color_custom_Blue""
local Rav_Color_Light_Blue = wesnoth.get_variable ""Rav_Color_Light_Blue""
local Rav_Color_Purple = wesnoth.get_variable ""Rav_Color_Purple""
local Rav_Color_Cyan = wesnoth.get_variable ""Rav_Color_Cyan""
local Rav_Color_Pink = wesnoth.get_variable ""Rav_Color_Pink""

-- Not unsetting those variables, so that I can see them from ageless unsynced menu
-- wesnoth.set_variable ""Rav_Color_Yellow""
-- NOTE the WML ""Rav_Color_Blue"" is now not required for this Lua script
-- And Rav_Color_custom_Blue is not needed for ageless, and info of Rav_Color_Light_Blue can be seen from Rav_Color_Blue now
wesnoth.set_variable ""Rav_Color_custom_Blue""
wesnoth.set_variable ""Rav_Color_Light_Blue""
-- wesnoth.set_variable ""Rav_Color_Purple""
-- wesnoth.set_variable ""Rav_Color_Cyan""
-- wesnoth.set_variable ""Rav_Color_Pink""

-- https://wiki.wesnoth.org/LuaWML/Sides#wesnoth.set_side_id
for i,v in ipairs(wesnoth.sides) do
	if(v.color == ""brown"" or v.color == ""6"") then
		if(Rav_Color_Yellow) then
			wesnoth.set_side_id(i,"""",""Rav_yellow"")
		else
			wesnoth.set_side_id(i,"""",""gold"")
		end
	end
	if(v.color == ""blue"" or v.color == ""2"") then
		if(Rav_Color_Blue) then
			wesnoth.set_side_id(i,"""",""Rav_blue_light"")
		elseif(Rav_Color_Light_Blue) then
			wesnoth.set_side_id(i,"""",""lightblue"")
		end
	end
	if(v.color == ""teal"" or v.color == ""9"") then
		if(Rav_Color_Cyan) then
			wesnoth.set_side_id(i,"""",""Rav_cyan"")
		end
	end
	if(v.color == ""purple"" or v.color == ""4"") then
		if(Rav_Color_Purple) then
			wesnoth.set_side_id(i,"""",""Rav_purple_light"")
		end
	end
	if(v.color == ""black"" or v.color == ""5"") then
		if(Rav_Color_Pink) then
			wesnoth.set_side_id(i,"""",""Rav_pink"")
		end
	end	
end
			"
		[/lua]
	[/event]
[/modification]
[replay]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=5
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		dependent=yes
		from_side=1
		[input]
			v="1.11.0"
		[/input]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Fencer"
			x=13
			y=20
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="ca68e3c1"
[/random_seed]
[/command]

	[command]
		from_side=1
		[recruit]
			type="Spearman"
			x=13
			y=21
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="26e03bce"
[/random_seed]
[/command]

	[command]
		from_side=1
		[recruit]
			type="Merman Fighter"
			x=14
			y=21
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="a2349fb6"
[/random_seed]
[/command]

	[command]
		from_side=1
		[recruit]
			type="Spearman"
			x=12
			y=21
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="cc6a6226"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12,11,10,9"
			y="22,21,22,22,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=9
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=9
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=9
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		dependent=yes
		from_side=2
		[input]
			v="0.0.0"
		[/input]
	[/command]

	[command]
		from_side=2
		[recruit]
			type="Ghoul"
			x=13
			y=6
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
			[result]
				checksum="7gg8X.+0rfdz5fYhl+>j5dL7bld1Ekel9.obaGxnPW28aY<7n8eJfcjd>6iFZjZ391fY>iklc8.8eo7cg4mjyg5lf.6NllciP<YebfY+1,XHki+5za7kg5dJti.XaZ1d"
			[/result]
			[result]
				next_unit_id=10
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[recruit]
			type="Skeleton Archer"
			x=13
			y=5
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
			[result]
				checksum="H5P5.ZS9OHr3sNJB3RPHKSNV-BOwSKsEMGuGSoSaFZzUNOAKDrqv76HRmwQOP1KIqgnJwQOsGALSBOPNMOzTBEppQEtD--kCCHKIkm,Gu-hYIVezvdyHqBW.6FwXcau4"
			[/result]
			[result]
				next_unit_id=11
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[recruit]
			type="Dark Adept"
			x=12
			y=4
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="1279a39a"
[/random_seed]
[/command]

	[command]
		from_side=2
		[recruit]
			type="Ghost"
			x=14
			y=4
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
			[result]
				checksum=".3tnxFGR8KAdAETQIH<FtqOCV9vEyIIuROHsUIAIgP3pHDMmQRxEt.,NLAqJPQ4wqI6KvDsAywCvvASFoGEHSOw3.i7JK9xGZqNL<JUAOCfK.3rfAIqoYKsOI9vwQNAF"
			[/result]
			[result]
				next_unit_id=13
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="13,14,15,16,17"
			y="4,4,4,3,4"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=4
				stopped_early=no
			[/result]
			[result]
				next_unit_id=13
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=13
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=13
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		dependent=yes
		from_side=3
		[input]
			v="0.0.0"
		[/input]
	[/command]

	[command]
		from_side=3
		[recruit]
			type="Naga Fighter"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0081741e"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Orcish Assassin"
			x=21
			y=13
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="270952f1"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Orcish Grunt"
			x=22
			y=12
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="387a542d"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Naga Fighter"
			x=22
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="83cfa065"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="22,22,22,22,23,23"
			y="13,12,11,10,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=23
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=17
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=17
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=17
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		dependent=yes
		from_side=4
		[input]
			v="1.11.0"
		[/input]
	[/command]

	[command]
		from_side=4
		[recruit]
			type="Orcish Archer"
			x=4
			y=11
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="901fd23f"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Orcish Assassin"
			x=5
			y=12
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c4844c0f"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Troll Whelp"
			x=5
			y=13
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="603faba4"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Naga Fighter"
			x=4
			y=13
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="e348ac3c"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="4,4,4,4"
			y="12,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=4
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="14,14,14,13,12,11,10"
			y="21,20,19,19,18,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13,13"
			y="20,19,18"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=18
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13,13"
			y="17,16,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12"
			y="15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13,14,15,15,16"
			y="21,20,19,19,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,13,14,15,16"
			y="21,22,21,22,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="9,10,11,12,13"
			y="22,21,21,21,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="22,21"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=21
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="13,12,11,10,10"
			y="6,6,7,7,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="12,11,10"
			y="4,4,3"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=3
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[move]
			x="13,13,13,13,13"
			y="5,6,7,8,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="14,14,14,15,16,16"
			y="4,5,6,7,7,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="17,16,15,14,13"
			y="4,4,5,4,4"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=4
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="22,22,22"
			y="14,15,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=16
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="21,20,19,18"
			y="14,14,15,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="21,20,19"
			y="13,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="22,21,20,19"
			y="12,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="23,23,22,22,22,22"
			y="9,10,10,11,12,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=21
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[recruit]
			type="Troll Whelp"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c33380bf"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="4,4,4,4,4,3,3"
			y="11,12,13,14,15,16,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=3
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="5,6,7,8"
			y="12,11,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="5,6,7"
			y="13,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="4,5,6,7"
			y="13,14,14,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="4,4,4,4"
			y="9,10,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=4
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=22
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[recruit]
			type="Troll Whelp"
			x=5
			y=12
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="b5a7f497"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="10,11,12,13,14,15,15"
			y="17,18,18,19,18,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,16"
			y="22,21"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=21
				stopped_early=no
			[/result]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,16,16,16"
			y="21,20,19,18"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=18
				stopped_early=no
			[/result]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="21,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=23
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Mage"
			x=13
			y=20
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="dfe2d3a7"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13,13,14,15,15"
			y="22,21,20,19,19,18"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=18
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,12,12"
			y="14,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,13,14"
			y="12,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="13,14,14"
			y="9,9,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Skeleton Archer"
			defender_lvl=1
			defender_type="Fencer"
			defender_weapon=-1
			tod="afternoon"
			turn=3
			weapon=1
			[source]
				x=14
				y=10
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="665d4828"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="10,11,12,12,13"
			y="8,9,9,10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghoul"
			defender_lvl=1
			defender_type="Fencer"
			defender_weapon=0
			tod="afternoon"
			turn=3
			weapon=0
			[source]
				x=13
				y=11
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c72d86cd"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="16,16,16,16,16,15,14"
			y="8,9,10,11,12,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=13
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="15,14"
			y="13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghost"
			defender_lvl=1
			defender_type="Fencer"
			defender_weapon=-1
			tod="afternoon"
			turn=3
			weapon=1
			[source]
				x=14
				y=12
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="a98d9a1f"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="10,10,10,10,10"
			y="3,4,5,6,7"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=7
				stopped_early=no
			[/result]
			[result]
				next_unit_id=24
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[recruit]
			type="Dark Adept"
			x=13
			y=6
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f8cee62e"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=25
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=25
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="19,18,17,16,15"
			y="11,11,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=25
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Grunt"
			defender_lvl=1
			defender_type="Fencer"
			defender_weapon=0
			tod="afternoon"
			turn=3
			weapon=0
			[source]
				x=15
				y=11
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c05cb13b"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="19,18,17,16,15"
			y="14,13,14,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=25
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="21,20,19,18,17"
			y="14,13,14,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=25
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[recruit]
			type="Goblin Spearman"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="61fdea25"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Goblin Spearman"
			x=21
			y=13
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="86e38bf1"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="22,21,20,19,18"
			y="13,14,13,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="22,21,20,19,18,17,16"
			y="16,16,15,15,15,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="8,8,9,10"
			y="10,9,9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=9
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="8,9,10"
			y="9,9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=9
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="9,10"
			y="9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Dark Adept"
			defender_weapon=0
			tod="afternoon"
			turn=3
			weapon=1
			[source]
				x=10
				y=8
			[/source]
			[destination]
				x=10
				y=7
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="787f34d9"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="7,8,9,10,11"
			y="12,12,12,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="7,7,7,7,7,8,9,10"
			y="15,14,13,12,11,10,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="5,6,7,8,9,10"
			y="12,12,12,11,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="3,4,5,6,7,8"
			y="17,16,16,15,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=27
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[recruit]
			type="Orcish Assassin"
			x=5
			y=12
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="7adf007d"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="4,5,6,7,8,9"
			y="12,13,12,12,12,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,15,14,14,13,12"
			y="17,17,16,15,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12,11,11,10"
			y="20,19,19,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,16"
			y="18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="15,15,14,13,13,13"
			y="18,19,19,20,21,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=28
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Spearman"
			x=13
			y=20
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="3f4e7daf"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="22,21"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=21
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="15,15,14,14,14"
			y="17,18,18,19,20"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=20
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="14,14"
			y="10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[move]
			x="13,12"
			y="6,6"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=6
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[move]
			x="10,10,10,10,10"
			y="7,6,5,4,3"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=3
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="13,13,13,12,11,10"
			y="4,5,6,6,7,7"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=7
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=2
			attacker_type="Revenant"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=0
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=10
				y=7
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="92346760"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="12,11,11"
			y="6,7,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Dark Adept"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=1
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=11
				y=8
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="98cb8a53"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="14,13,13,12,12,12,12,11,10,9,9,9"
			y="12,12,11,10,9,8,7,7,6,7,8,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=12
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="13,13,12,12,11"
			y="12,11,10,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghost"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=0
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=11
				y=9
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c7b9fec5"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="13,12"
			y="11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="18,17,16,15,14,13"
			y="14,14,13,14,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=2
			attacker_type="Orcish Crossbowman"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=1
			tod="dusk"
			turn=4
			weapon=1
			[source]
				x=13
				y=14
			[/source]
			[destination]
				x=12
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="df753723"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="15,15,15,15,14,13"
			y="11,12,13,14,14,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Grunt"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=0
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=13
				y=15
			[/source]
			[destination]
				x=12
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f30f4ff1"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="15,14,13,12"
			y="14,13,13,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=1
			tod="dusk"
			turn=4
			weapon=1
			[source]
				x=12
				y=13
			[/source]
			[destination]
				x=12
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f9ad9aae"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="16,15,14,13,12"
			y="14,14,13,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="17,16,15,14"
			y="14,14,15,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="18,17"
			y="15,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=16
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="21,20,19,18,17"
			y="14,13,14,14,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="21,20,19,18,17,16"
			y="13,13,14,14,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="10,10"
			y="9,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="8,9,10,10,10,10,10"
			y="14,14,13,12,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Archer"
			defender_lvl=1
			defender_type="Ghost"
			defender_weapon=1
			tod="dusk"
			turn=4
			weapon=2
			[source]
				x=10
				y=9
			[/source]
			[destination]
				x=11
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="2b9bbfae"
[/random_seed]
[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Ghost"
			defender_weapon=1
			tod="dusk"
			turn=4
			weapon=1
			[source]
				x=10
				y=8
			[/source]
			[destination]
				x=11
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="363863f1"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="10,11"
			y="10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Naga Fighter"
			defender_lvl=1
			defender_type="Ghost"
			defender_weapon=0
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=11
				y=10
			[/source]
			[destination]
				x=11
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f7ed6c3c"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="10,10,11,12,12"
			y="11,10,10,9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Dark Adept"
			defender_weapon=-1
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=12
				y=8
			[/source]
			[destination]
				x=11
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="e78e2089"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="11,10,10,10,11"
			y="12,11,10,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Dark Adept"
			defender_weapon=-1
			tod="dusk"
			turn=4
			weapon=0
			[source]
				x=11
				y=9
			[/source]
			[destination]
				x=11
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="1ee1f350"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="5,6,7,8,9,10,11"
			y="12,11,12,11,12,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Ghoul"
			defender_weapon=-1
			tod="dusk"
			turn=4
			weapon=1
			[source]
				x=11
				y=12
			[/source]
			[destination]
				x=12
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="ce2fe90e"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="9,10,11"
			y="13,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=2
			attacker_type="Troll Rocklobber"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=-1
			tod="dusk"
			turn=4
			weapon=1
			[source]
				x=11
				y=14
			[/source]
			[destination]
				x=12
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="84af12b7"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,15,14,13,13"
			y="17,18,17,17,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=16
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Orcish Grunt"
			defender_weapon=-1
			tod="first_watch"
			turn=5
			weapon=1
			[source]
				x=13
				y=16
			[/source]
			[destination]
				x=13
				y=15
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="66beb57c"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,14,15,16,16"
			y="20,19,19,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="21,22"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=22
				stopped_early=no
			[/result]
			[result]
				next_unit_id=29
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Mage"
			x=13
			y=20
			[from]
				x=13
				y=22
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="b5d50017"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13,13,14,15,16"
			y="22,21,20,19,19,18"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=18
				stopped_early=no
			[/result]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="14,14,14,15"
			y="20,19,18,18"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=18
				stopped_early=no
			[/result]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="10,11,11,12"
			y="17,17,16,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=1
			defender_type="Orcish Grunt"
			defender_weapon=-1
			tod="first_watch"
			turn=5
			weapon=1
			[source]
				x=12
				y=15
			[/source]
			[destination]
				x=13
				y=15
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c000361b"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="10,11,12,13,13,13"
			y="7,7,6,6,5,4"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=4
				stopped_early=no
			[/result]
			[result]
				next_unit_id=30
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[recruit]
			type="Ghost"
			x=13
			y=6
			[from]
				x=13
				y=4
			[/from]
		[/recruit]
		[checkup]
			[result]
				checksum=".3tnxFGR8KAdAETQIH<FtqOCV9vEyIIuROHsUIAIgP3pHDMmQRxEt.,NLAqJPQ4wqI6KvDsAywCvvASFoGEHSOw3.i7JK9xGZqNL<JUAOCfK.3rfAIqoYKsOI9vwQNAF"
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghoul"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=0
			tod="first_watch"
			turn=5
			weapon=0
			[source]
				x=12
				y=11
			[/source]
			[destination]
				x=11
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="381663a5"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="14,13,12"
			y="11,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Skeleton Archer"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=1
			tod="first_watch"
			turn=5
			weapon=1
			[source]
				x=12
				y=12
			[/source]
			[destination]
				x=11
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="78c7cf72"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="12,11"
			y="13,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=1
			tod="first_watch"
			turn=5
			weapon=1
			[source]
				x=11
				y=13
			[/source]
			[destination]
				x=11
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="d17268bb"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="12,13,13,12,11"
			y="14,14,13,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="11,10"
			y="12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="14,14,15"
			y="15,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="13,14,15,16,17,18"
			y="14,14,14,13,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="17,18"
			y="16,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="17,17,17,17,16,15"
			y="15,14,13,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="16,16,16,15,14,13"
			y="14,13,12,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="10,11,12,13,14,14"
			y="9,9,9,10,10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Archer"
			defender_lvl=0
			defender_type="Goblin Spearman"
			defender_weapon=1
			tod="first_watch"
			turn=5
			weapon=2
			[source]
				x=14
				y=11
			[/source]
			[destination]
				x=13
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="44952236"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="12,13,14,15,16"
			y="8,9,9,9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="11,10,9,9,10"
			y="14,14,14,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=2
			attacker_type="Troll Rocklobber"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=0
			tod="first_watch"
			turn=5
			weapon=0
			[source]
				x=10
				y=12
			[/source]
			[destination]
				x=10
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="d195d5e7"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="11,10"
			y="10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Naga Fighter"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=0
			tod="first_watch"
			turn=5
			weapon=0
			[source]
				x=10
				y=10
			[/source]
			[destination]
				x=10
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="d4938409"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="11,10,10,10,11"
			y="9,9,10,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Ghoul"
			defender_weapon=0
			tod="first_watch"
			turn=5
			weapon=0
			[source]
				x=11
				y=12
			[/source]
			[destination]
				x=12
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="984106c2"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,16,15,14,14,13,12"
			y="18,17,17,16,15,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,12,12"
			y="15,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=1
			tod="second_watch"
			turn=6
			weapon=1
			[source]
				x=12
				y=13
			[/source]
			[destination]
				x=11
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f6f7f662"
[/random_seed]
[/command]

	[command]
		undo=no
		[label]
			category=""
			color="107,140,255"
			immutable=no
			side=4
			team_name="south-west"
			text=1
			tooltip=""
			visible_in_fog=yes
			visible_in_shroud=no
			x=16
			y=17
		[/label]
	[/command]

	[command]
		undo=no
		[label]
			category=""
			color="107,140,255"
			immutable=no
			side=4
			team_name="south-west"
			text=1
			tooltip=""
			visible_in_fog=yes
			visible_in_shroud=no
			x=11
			y=14
		[/label]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12,11,10,10"
			y="16,15,15,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=10
				y=13
			[/source]
			[destination]
				x=11
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="4730f477"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12,11,11,10"
			y="20,19,19,18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		undo=no
		[clear_labels]
			force=no
			team_name="south-west"
		[/clear_labels]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,15,14,13,13,13"
			y="17,17,16,16,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="15,16"
			y="18,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="10,10,10,10,10"
			y="3,4,5,6,7"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=7
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Dark Adept"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=1
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=10
				y=7
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="50ebed1c"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="13,13,13,12,11,11"
			y="4,5,6,6,7,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=2
			attacker_type="Revenant"
			defender_lvl=1
			defender_type="Orcish Assassin"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=11
				y=8
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f641b815"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="13,12,11,11,10"
			y="6,6,7,8,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="12,12,12,11,11,11"
			y="11,10,9,9,8,7"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=7
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[move]
			x="12,12"
			y="12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Skeleton Archer"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="second_watch"
			turn=6
			weapon=1
			[source]
				x=12
				y=11
			[/source]
			[destination]
				x=11
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="149a5e9e"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="13,12,12,11,10"
			y="11,10,9,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=0
			attacker_type="Goblin Spearman"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=10
				y=9
			[/source]
			[destination]
				x=10
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="85d720af"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="15,16,16,16,15,14"
			y="11,11,12,13,14,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=0
			attacker_type="Goblin Spearman"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=14
				y=14
			[/source]
			[destination]
				x=13
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="99e83407"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="15,14"
			y="14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=14
				y=13
			[/source]
			[destination]
				x=13
				y=14
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="9ee40829"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="18,17,16"
			y="15,16,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=16
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="17,16"
			y="16,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=16
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Naga Fighter"
			defender_lvl=1
			defender_type="Merman Fighter"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=16
				y=16
			[/source]
			[destination]
				x=16
				y=17
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0f3febdb"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="18,19,20,21,22"
			y="13,14,13,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=31
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[recruit]
			type="Orcish Grunt"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0138cb9d"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Troll Whelp"
			x=22
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f00e5183"
[/random_seed]
[/command]

	[command]
		from_side=3
		[recruit]
			type="Troll Whelp"
			x=21
			y=13
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f4c66d36"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="22,22,22,22,21,20"
			y="13,12,11,10,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="10,10,11,12,13,14"
			y="12,13,14,14,15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=2
			attacker_type="Troll Rocklobber"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="second_watch"
			turn=6
			weapon=1
			[source]
				x=14
				y=14
			[/source]
			[destination]
				x=14
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c36d3dfd"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="10,9"
			y="10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Naga Fighter"
			defender_lvl=0
			defender_type="Goblin Spearman"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=9
				y=10
			[/source]
			[destination]
				x=10
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="79603b50"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="14,15,16,16,15"
			y="11,12,12,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=12
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="15,16,16,15"
			y="12,12,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Archer"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="second_watch"
			turn=6
			weapon=1
			[source]
				x=15
				y=14
			[/source]
			[destination]
				x=14
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="51f6e887"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="16,16,17,18,19"
			y="8,9,10,10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="11,12"
			y="12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Skeleton Archer"
			defender_weapon=0
			tod="second_watch"
			turn=6
			weapon=0
			[source]
				x=12
				y=12
			[/source]
			[destination]
				x=12
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="63cc231f"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,11,11"
			y="13,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=1
			defender_type="Skeleton Archer"
			defender_weapon=1
			tod="dawn"
			turn=7
			weapon=1
			[source]
				x=11
				y=12
			[/source]
			[destination]
				x=12
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="874a66b4"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="10,10,10,11"
			y="13,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Skeleton Archer"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=11
				y=11
			[/source]
			[destination]
				x=12
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="4245dd35"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,13"
			y="14,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="10,11,12,13,14,15"
			y="17,17,17,17,16,17"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=17
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=-1
			tod="dawn"
			turn=7
			weapon=1
			[source]
				x=15
				y=17
			[/source]
			[destination]
				x=16
				y=16
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="5d7e50b8"
[/random_seed]
[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Merman Fighter"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=16
				y=17
			[/source]
			[destination]
				x=16
				y=16
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="a50d0b4d"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,11,10,9,8,7"
			y="14,14,13,13,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="13,12"
			y="15,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=12
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="10,9,8,8"
			y="7,8,8,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Dark Adept"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=-1
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=8
				y=9
			[/source]
			[destination]
				x=9
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="e34572a7"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="11,10,9"
			y="8,8,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=2
			attacker_type="Revenant"
			defender_lvl=1
			defender_type="Naga Fighter"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=9
				y=9
			[/source]
			[destination]
				x=9
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="8cccddc7"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="11,10,10,10,10"
			y="7,6,5,4,3"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=3
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			x="10,9,8,8"
			y="8,9,9,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

[command]
undo="no"
[speak]
id="server"
message="filfighter becomes an observer."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="FLORIS takes control of side 2."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="filfighter has surrendered."
[/speak]
[/command]

	[command]
		undo=no
		[surrender]
			side_number=1
		[/surrender]
	[/command]

	[command]
		from_side=3
		[move]
			x="22,21,21,20"
			y="12,12,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=20
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=2
			attacker_type="Orcish Crossbowman"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="dawn"
			turn=7
			weapon=2
			[source]
				x=20
				y=10
			[/source]
			[destination]
				x=19
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="88b572bd"
[/random_seed]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Luckwine takes control of side 2."
[/speak]
[/command]

	[command]
		from_side=3
		[move]
			x="21,21,20"
			y="13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=20
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=20
				y=11
			[/source]
			[destination]
				x=19
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0f23d16a"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="21,20,19,18,18,18"
			y="14,13,14,13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Grunt"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=18
				y=11
			[/source]
			[destination]
				x=19
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="3da347dc"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="14,14,14"
			y="13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[move]
			x="22,21,20,20,19"
			y="14,14,13,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=19
				y=12
			[/source]
			[destination]
				x=19
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="6bdfda8c"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="14,15,16,17,18,19"
			y="14,14,13,14,13,14"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=14
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="15,16,17,18,19,20,21"
			y="14,13,14,14,14,13,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=2
			defender_type="Orcish Crossbowman"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=19
				y=11
			[/source]
			[destination]
				x=20
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="b022586b"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="12,13"
			y="12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=13
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dawn"
			turn=7
			weapon=0
			[source]
				x=13
				y=12
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0ddae590"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="11,11,11,11,10"
			y="12,11,10,9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=9
				stopped_early=yes
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="11,10"
			y="9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=2
			defender_type="Revenant"
			defender_weapon=-1
			tod="morning"
			turn=8
			weapon=1
			[source]
				x=10
				y=8
			[/source]
			[destination]
				x=9
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="606e6754"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="11,10,9"
			y="11,10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Dark Adept"
			defender_weapon=-1
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=9
				y=10
			[/source]
			[destination]
				x=8
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="e29ce1ca"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="7,6,5,4"
			y="12,12,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=4
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=34
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Mage"
			x=5
			y=12
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0ab9b912"
[/random_seed]
[/command]

	[command]
		from_side=1
		[recruit]
			type="Merman Fighter"
			x=5
			y=13
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c9fe6377"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="12,13,14,14"
			y="14,14,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=14
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=14
				y=12
			[/source]
			[destination]
				x=14
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="13867fd3"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="16,16,17,18,19,19,19"
			y="17,16,16,15,15,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Merman Fighter"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=19
				y=13
			[/source]
			[destination]
				x=19
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="94a8ac54"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="15,16,16,16,17,18,18"
			y="17,16,15,14,14,13,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="morning"
			turn=8
			weapon=1
			[source]
				x=18
				y=12
			[/source]
			[destination]
				x=19
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="5861046e"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]

[command]
undo="no"
[speak]
id="Sergeant"
message="gg"
side="1"
time="1583017824"
[/speak]
[/command]

	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Dark Adept"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=1
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=8
				y=9
			[/source]
			[destination]
				x=9
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="72d0ce6c"
[/random_seed]
[/command]

	[command]
		from_side=2
		[attack]
			attacker_lvl=2
			attacker_type="Revenant"
			defender_lvl=1
			defender_type="Mage"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=9
				y=9
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="0ed035c3"
[/random_seed]
[/command]

[command]
undo="no"
[speak]
id="Sergeant"
message="oh"
side="1"
time="1583017845"
[/speak]
[/command]

	[command]
		from_side=2
		[move]
			x="10,10,10,10,10"
			y="3,4,5,6,7"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=7
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghoul"
			defender_lvl=1
			defender_type="Mage"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=10
				y=7
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="9311b3ba"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			x="8,8,9,10,11,11,10"
			y="10,11,12,11,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghost"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=1
			tod="morning"
			turn=8
			weapon=1
			[source]
				x=10
				y=9
			[/source]
			[destination]
				x=9
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="aef00688"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="20,21,21"
			y="10,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			x="20,21,22,22"
			y="11,11,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Orcish Archer"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=22
				y=12
			[/source]
			[destination]
				x=21
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="894ed0ca"
[/random_seed]
[/command]

	[command]
		from_side=3
		[attack]
			attacker_lvl=2
			attacker_type="Orcish Crossbowman"
			defender_lvl=1
			defender_type="Orcish Archer"
			defender_weapon=1
			tod="morning"
			turn=8
			weapon=1
			[source]
				x=21
				y=12
			[/source]
			[destination]
				x=21
				y=13
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="418905d1"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			x="18,17"
			y="11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Grunt"
			defender_lvl=1
			defender_type="Mage"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=17
				y=12
			[/source]
			[destination]
				x=18
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="b848f99a"
[/random_seed]
[/command]

[command]
undo="no"
[speak]
id="server"
message="FLORIS takes control of side 2."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Luckwine has surrendered."
[/speak]
[/command]

	[command]
		undo=no
		[surrender]
			side_number=2
		[/surrender]
	[/command]

[command]
undo="no"
[speak]
id="server"
message="Luckwine has disconnected."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="FLORIS takes control of side 3."
[/speak]
[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="19,20,21,22"
			y="14,13,14,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="21,21,22,22,22"
			y="13,14,14,15,16"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=16
				stopped_early=no
			[/result]
			[result]
				next_unit_id=36
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[recruit]
			type="Troll Whelp"
			x=21
			y=13
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f8bf645f"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Troll Whelp"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="c8b052bd"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Troll Whelp"
			x=22
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="68db313d"
[/random_seed]
[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=2
			attacker_type="Troll Rocklobber"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="morning"
			turn=8
			weapon=1
			[source]
				x=22
				y=13
			[/source]
			[destination]
				x=22
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="35ae9df3"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="19,20,21"
			y="11,10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=2
			defender_type="Orcish Crossbowman"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=21
				y=11
			[/source]
			[destination]
				x=21
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="5d6e6190"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="13,14,15,16"
			y="12,11,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=16
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Orcish Grunt"
			defender_weapon=0
			tod="morning"
			turn=8
			weapon=0
			[source]
				x=16
				y=11
			[/source]
			[destination]
				x=17
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="e277b081"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Dark Adept"
			defender_weapon=-1
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=9
				y=10
			[/source]
			[destination]
				x=8
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="5502bb04"
[/random_seed]
[/command]

	[command]
		dependent=yes
		from_side=1
		[choose]
			value=0
		[/choose]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="5,6,7,8,9"
			y="12,12,12,12,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="5,6,7,7,7,8"
			y="13,13,13,12,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=39
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[recruit]
			type="Merman Fighter"
			x=5
			y=12
			[from]
				x=4
				y=12
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="d56c46c9"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="4,5,6,7,8"
			y="12,13,12,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="14,14,13,13,12,11"
			y="12,11,11,10,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=11
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="18,19,20"
			y="12,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=20
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=2
			defender_type="Orcish Crossbowman"
			defender_weapon=2
			tod="afternoon"
			turn=9
			weapon=1
			[source]
				x=20
				y=11
			[/source]
			[destination]
				x=21
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="b0a79e50"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="19,19,20"
			y="13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=20
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Merman Fighter"
			defender_lvl=2
			defender_type="Orcish Crossbowman"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=20
				y=11
			[/source]
			[destination]
				x=21
				y=12
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="617189f8"
[/random_seed]
[/command]

	[command]
		dependent=yes
		from_side=1
		[choose]
			value=0
		[/choose]
	[/command]

[command]
undo="no"
[speak]
id="Sergeant"
message="pardon"
side="1"
time="1583018068"
[/speak]
[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

[command]
undo="no"
[speak]
id="FLORIS"
message="u had to take orc"
side="2"
time="1583018073"
[/speak]
[/command]

	[command]
		from_side=2
		[move]
			skip_sighted="all"
			x="9,8,7"
			y="9,8,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			skip_sighted="all"
			x="10,10"
			y="9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[attack]
			attacker_lvl=1
			attacker_type="Ghost"
			defender_lvl=1
			defender_type="Spearman"
			defender_weapon=1
			tod="afternoon"
			turn=9
			weapon=1
			[source]
				x=10
				y=8
			[/source]
			[destination]
				x=11
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="9441cd04"
[/random_seed]
[/command]

	[command]
		from_side=2
		[move]
			skip_sighted="all"
			x="10,10,10,10,10"
			y="7,6,5,4,3"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=3
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			skip_sighted="all"
			x="17,18,18,19,20"
			y="12,11,10,10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=20
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Grunt"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=20
				y=10
			[/source]
			[destination]
				x=21
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="fa4b8f89"
[/random_seed]
[/command]

	[command]
		from_side=3
		[move]
			skip_sighted="all"
			x="22,23,23,22"
			y="12,12,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=22
				y=10
			[/source]
			[destination]
				x=21
				y=11
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="659cd8be"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			x="21,22,23,23"
			y="13,12,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=23
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=23
				y=11
			[/source]
			[destination]
				x=22
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f1f8e932"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="22,22,22,22,22,22"
			y="16,15,14,13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Archer"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="afternoon"
			turn=9
			weapon=1
			[source]
				x=22
				y=11
			[/source]
			[destination]
				x=22
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="66c6b2d5"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="16,17,18,19"
			y="11,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=19
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Orcish Grunt"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=19
				y=11
			[/source]
			[destination]
				x=20
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="06144650"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="21,21"
			y="11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[move]
			x="21,21,21,21"
			y="14,13,12,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Orcish Grunt"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=21
				y=11
			[/source]
			[destination]
				x=20
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="bcf94cdc"
[/random_seed]
[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="afternoon"
			turn=9
			weapon=0
			[source]
				x=21
				y=10
			[/source]
			[destination]
				x=22
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="eaecebdc"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="22,21,20,19,18,17"
			y="14,14,13,14,13,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=40
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[recruit]
			type="Naga Fighter"
			x=21
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="ae762bf0"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Naga Fighter"
			x=21
			y=13
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="7c1bad8d"
[/random_seed]
[/command]

	[command]
		from_side=4
		[recruit]
			type="Orcish Assassin"
			x=22
			y=12
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="3196758e"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			x="22,21,21,20,19,18"
			y="13,13,12,11,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="9,8,8,8"
			y="12,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="8,7"
			y="10,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="8,8"
			y="11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=2
			defender_type="Revenant"
			defender_weapon=-1
			tod="dusk"
			turn=10
			weapon=1
			[source]
				x=8
				y=9
			[/source]
			[destination]
				x=7
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f1bd7da6"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="9,9"
			y="10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="8,9"
			y="10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=9
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=2
			attacker_type="Swordsman"
			defender_lvl=1
			defender_type="Ghost"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=9
				y=9
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="d9200f1d"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="11,10"
			y="9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=10
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Spearman"
			defender_lvl=1
			defender_type="Ghost"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=10
				y=9
			[/source]
			[destination]
				x=10
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="9786ab06"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="7,7"
			y="11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=7
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]
	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Merman Fighter"
			defender_lvl=2
			defender_type="Revenant"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=7
				y=10
			[/source]
			[destination]
				x=7
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="5988536c"
[/random_seed]
[/command]

	[command]
		from_side=1
		[move]
			skip_sighted="only_ally"
			x="5,5,5,6"
			y="12,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=6
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Merman Fighter"
			defender_lvl=2
			defender_type="Revenant"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=6
				y=9
			[/source]
			[destination]
				x=7
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="96abf941"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=2
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup1]
	[/command]

	[command]
		[init_side]
			side_number=2
		[/init_side]
		[checkup]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=2
		[move]
			skip_sighted="all"
			x="7,8"
			y="9,8"
		[/move]
		[checkup]
			[result]
				final_hex_x=8
				final_hex_y=8
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=3
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=3
		[/init_side]
		[checkup]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[move]
			skip_sighted="all"
			x="22,22"
			y="10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=3
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=22
				y=9
			[/source]
			[destination]
				x=21
				y=10
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="61f5f814"
[/random_seed]
[/command]

	[command]
		[end_turn]
			next_player_number=4
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup1]
	[/command]
	[command]
		[init_side]
			side_number=4
		[/init_side]
		[checkup]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="18,19,20,21,22,22"
			y="10,11,11,12,12,13"
		[/move]
		[checkup]
			[result]
				final_hex_x=22
				final_hex_y=13
				stopped_early=no
			[/result]
			[result]
				next_unit_id=43
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[recruit]
			type="Orcish Assassin"
			x=22
			y=14
			[from]
				x=22
				y=13
			[/from]
		[/recruit]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="786d692f"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="22,23,23"
			y="11,11,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=23
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Archer"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="dusk"
			turn=10
			weapon=1
			[source]
				x=23
				y=10
			[/source]
			[destination]
				x=22
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="f1d58c47"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="22,21,20,20,20,21"
			y="12,12,11,10,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Orcish Assassin"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=-1
			tod="dusk"
			turn=10
			weapon=1
			[source]
				x=21
				y=9
			[/source]
			[destination]
				x=22
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="a175f662"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="17,17,18,19,20,21"
			y="13,12,11,11,10,10"
		[/move]
		[checkup]
			[result]
				final_hex_x=21
				final_hex_y=10
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=21
				y=10
			[/source]
			[destination]
				x=22
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="3ffd8af2"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="23,24,24,23"
			y="11,10,9,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=23
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[attack]
			attacker_lvl=1
			attacker_type="Troll Whelp"
			defender_lvl=1
			defender_type="Troll Whelp"
			defender_weapon=0
			tod="dusk"
			turn=10
			weapon=0
			[source]
				x=23
				y=9
			[/source]
			[destination]
				x=22
				y=9
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="7d44c9a2"
[/random_seed]
[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="21,20,19,19,18"
			y="13,13,14,15,15"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=15
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="19,18,17,16,15"
			y="11,11,12,11,11"
		[/move]
		[checkup]
			[result]
				final_hex_x=15
				final_hex_y=11
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="21,20,19,18,17"
			y="11,10,11,11,12"
		[/move]
		[checkup]
			[result]
				final_hex_x=17
				final_hex_y=12
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=4
		[move]
			skip_sighted="all"
			x="21,20,19,19,18,18,18"
			y="14,13,13,12,11,10,9"
		[/move]
		[checkup]
			[result]
				final_hex_x=18
				final_hex_y=9
				stopped_early=no
			[/result]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		[end_turn]
			next_player_number=5
		[/end_turn]
		[checkup1]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup1]
		[checkup2]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup2]
	[/command]

[command]
undo="no"
[speak]
id="FLORIS"
message="gg"
side="4"
time="1583018217"
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="FLORIS has surrendered."
[/speak]
[/command]

	[command]
		undo=no
		[surrender]
			side_number=3
		[/surrender]
	[/command]

[command]
undo="no"
[speak]
id="server"
message="FLORIS has left the game."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Sergeant has been chosen as the new host."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Sergeant takes control of side 2."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Sergeant takes control of side 3."
[/speak]
[/command]

[command]
undo="no"
[speak]
id="server"
message="Sergeant takes control of side 4."
[/speak]
[/command]

	[command]
		[init_side]
			side_number=1
		[/init_side]
		[checkup]
			[result]
				next_unit_id=44
				random_calls=0
			[/result]
		[/checkup]
	[/command]

	[command]
		from_side=1
		[attack]
			attacker_lvl=1
			attacker_type="Mage"
			defender_lvl=2
			defender_type="Revenant"
			defender_weapon=-1
			tod="first_watch"
			turn=11
			weapon=1
			[source]
				x=8
				y=9
			[/source]
			[destination]
				x=8
				y=8
			[/destination]
		[/attack]
		[checkup]
		[/checkup]
	[/command]

[command]
dependent="yes"
from_side="server"
[random_seed]
new_seed="fbdfe088"
[/random_seed]
[/command]
[/replay]
